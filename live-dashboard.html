<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReportPortal Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-hover: #334155;
            --accent-cyan: #06b6d4;
            --accent-green: #22c55e;
            --accent-red: #ef4444;
            --accent-yellow: #eab308;
            --accent-purple: #8b5cf6;
            --accent-orange: #f97316;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --border: #475569;
            --glow-cyan: 0 0 25px rgba(6, 182, 212, 0.35);
            --glow-green: 0 0 25px rgba(34, 197, 94, 0.35);
            --glow-red: 0 0 25px rgba(239, 68, 68, 0.35);
            --glow-purple: 0 0 25px rgba(139, 92, 246, 0.35);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 240, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 240, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1900px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0 1rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 45px; height: 45px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px;
            box-shadow: var(--glow-cyan);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: var(--glow-cyan); }
            50% { box-shadow: 0 0 50px rgba(0, 240, 255, 0.6); }
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-card);
            padding: 0.5rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-btn:hover {
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            color: var(--bg-dark);
            box-shadow: var(--glow-cyan);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Suite Report Styles */
        .main-controls {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr auto;
            gap: 1rem;
            align-items: end;
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .form-group select {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--bg-hover);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
        }

        .form-group select:hover { border-color: var(--accent-cyan); }
        .form-group select:focus { outline: none; border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }

        .select-wrapper {
            position: relative;
        }

        .select-wrapper::after {
            content: '‚ñº';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            pointer-events: none;
            font-size: 0.7rem;
        }

        .btn-primary {
            padding: 0.875rem 2rem;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border: none;
            border-radius: 10px;
            color: var(--bg-dark);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--glow-cyan); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        /* Report Card */
        .report-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
            background: rgba(0, 240, 255, 0.02);
        }

        .report-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-badge.passed { background: rgba(0, 255, 136, 0.15); color: var(--accent-green); border: 1px solid var(--accent-green); }
        .status-badge.failed { background: rgba(255, 56, 96, 0.15); color: var(--accent-red); border: 1px solid var(--accent-red); }

        .report-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            padding: 1.5rem;
        }

        .report-stat {
            text-align: center;
            padding: 1rem;
            background: var(--bg-hover);
            border-radius: 12px;
        }

        .report-stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
        }

        .report-stat-value.total { color: var(--accent-cyan); }
        .report-stat-value.passed { color: var(--accent-green); }
        .report-stat-value.failed { color: var(--accent-red); }
        .report-stat-value.duration { color: var(--accent-orange); }

        .report-stat-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        .report-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            padding: 1rem 1.5rem;
            background: var(--bg-hover);
            margin: 0 1.5rem 1.5rem;
            border-radius: 10px;
        }

        .meta-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .meta-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .meta-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
        }

        .link-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 240, 255, 0.1);
            border: 1px solid var(--accent-cyan);
            border-radius: 6px;
            color: var(--accent-cyan);
            text-decoration: none;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .link-btn:hover { background: rgba(0, 240, 255, 0.2); }

        .failed-tests-panel {
            margin: 0 1.5rem 1.5rem;
            background: rgba(255, 56, 96, 0.05);
            border: 1px solid rgba(255, 56, 96, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .failed-tests-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid rgba(255, 56, 96, 0.2);
            font-weight: 600;
            color: var(--accent-red);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .failed-test-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .failed-test-item {
            padding: 0.75rem 1.25rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .failed-test-num {
            width: 28px;
            height: 28px;
            background: rgba(255, 56, 96, 0.2);
            color: var(--accent-red);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .failed-test-name {
            font-size: 0.85rem;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .loading-state {
            text-align: center;
            padding: 3rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        @media (max-width: 1400px) {
            .main-controls { grid-template-columns: 1fr 1fr; }
        }

        @media (max-width: 768px) {
            .main-controls { grid-template-columns: 1fr; }
            .reports-grid { grid-template-columns: 1fr; }
        }

        .hidden { display: none !important; }

        /* Date Picker Styles for Suite Report */
        .date-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .date-picker-input {
            flex: 1;
            padding: 0.875rem 1rem;
            background: var(--bg-hover);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .date-picker-input:hover { border-color: var(--accent-cyan); }
        .date-picker-input:focus { outline: none; border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }

        .date-picker-input::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
        }

        .clear-date-btn-inline {
            width: 36px;
            height: 36px;
            background: rgba(255, 56, 96, 0.2);
            color: var(--accent-red);
            border: 1px solid var(--accent-red);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .clear-date-btn-inline:hover {
            background: rgba(255, 56, 96, 0.4);
            transform: scale(1.05);
        }

        /* Multiple Reports List */
        .reports-list {
            margin-top: 1.5rem;
        }

        .reports-list-header {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1rem;
        }

        .report-card-mini {
            background: var(--bg-hover);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .report-card-mini:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 240, 255, 0.1);
        }

        .report-card-mini.passed { border-left: 4px solid var(--accent-green); }
        .report-card-mini.failed { border-left: 4px solid var(--accent-red); }
        .report-card-mini.in_progress { border-left: 4px solid var(--accent-yellow); }

        .report-card-mini-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .report-card-mini-title {
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .report-card-mini-status {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .report-card-mini-status.passed { background: rgba(0, 255, 136, 0.15); color: var(--accent-green); }
        .report-card-mini-status.failed { background: rgba(255, 56, 96, 0.15); color: var(--accent-red); }
        .report-card-mini-status.in_progress { background: rgba(255, 221, 0, 0.15); color: var(--accent-yellow); }

        .report-card-mini-stats {
            display: flex;
            gap: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .report-card-mini-stats .passed { color: var(--accent-green); }
        .report-card-mini-stats .failed { color: var(--accent-red); }

        .report-card-mini-meta {
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
        }

        .no-results-message {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            background: var(--bg-hover);
            border-radius: 12px;
            border: 1px dashed var(--border);
        }

        /* REST API Reports Tab Styles */
        .restapi-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-card);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .restapi-controls > .back-btn {
            flex-shrink: 0;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .breadcrumb-item {
            padding: 0.5rem 0.75rem;
            background: var(--bg-hover);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .breadcrumb-item:hover {
            background: rgba(0, 240, 255, 0.1);
            color: var(--accent-cyan);
        }

        .breadcrumb-item.active {
            background: rgba(0, 240, 255, 0.15);
            color: var(--accent-cyan);
            border: 1px solid var(--accent-cyan);
        }

        .breadcrumb-separator {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .restapi-filters {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .restapi-search {
            flex: 1;
            max-width: 400px;
        }

        .date-filter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-hover);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 2px solid var(--accent);
        }

        .date-filter.hidden {
            display: none;
        }

        .date-filter-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .date-input {
            padding: 0.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .date-input::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
        }

        .clear-date-btn {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .clear-date-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-hover);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: var(--glow-cyan);
        }

        .restapi-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .restapi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .restapi-card {
            background: var(--bg-hover);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .restapi-card:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 240, 255, 0.1);
        }

        .restapi-card.directory {
            border-left: 3px solid var(--accent-purple);
        }

        .restapi-card.report {
            border-left: 3px solid var(--accent-green);
        }

        .restapi-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .restapi-card.directory .restapi-card-icon {
            background: rgba(189, 0, 255, 0.15);
        }

        .restapi-card.report .restapi-card-icon {
            background: rgba(0, 255, 136, 0.15);
        }

        .restapi-card-info {
            flex: 1;
            overflow: hidden;
        }

        .restapi-card-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .restapi-card-meta {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .restapi-report {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .report-viewer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-hover);
            border-bottom: 1px solid var(--border);
        }

        .back-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }

        .report-frame {
            width: 100%;
            height: calc(100vh - 300px);
            min-height: 500px;
            border: none;
            background: #fff;
        }

        /* Recent reports section */
        .recent-reports {
            margin-top: 1.5rem;
        }

        .recent-reports-header {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent-orange);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recent-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1rem;
        }

        .recent-item {
            background: var(--bg-hover);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .recent-item:hover {
            border-color: var(--accent-orange);
            background: rgba(255, 149, 0, 0.05);
        }

        .recent-icon {
            width: 36px;
            height: 36px;
            background: rgba(255, 149, 0, 0.15);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .recent-info h5 {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.15rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 280px;
        }

        .recent-info span {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* API Owners Tab Styles */
        .owner-controls {
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr auto;
            gap: 1rem;
            align-items: end;
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        @media (max-width: 1200px) {
            .owner-controls {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .owner-controls {
                grid-template-columns: 1fr;
            }
        }

        .owner-suites-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .owner-suites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(0, 240, 255, 0.05), rgba(189, 0, 255, 0.05));
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .owner-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .owner-avatar {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            box-shadow: var(--glow-cyan);
        }

        .owner-details h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .owner-stats {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .owner-summary {
            display: flex;
            gap: 1.5rem;
        }

        .summary-stat {
            text-align: center;
            padding: 0.75rem 1.25rem;
            background: var(--bg-hover);
            border-radius: 10px;
            min-width: 80px;
        }

        .summary-stat.passed { border: 1px solid var(--accent-green); }
        .summary-stat.failed { border: 1px solid var(--accent-red); }
        .summary-stat.total { border: 1px solid var(--accent-cyan); }

        .summary-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            display: block;
        }

        .summary-stat.passed .summary-value { color: var(--accent-green); }
        .summary-stat.failed .summary-value { color: var(--accent-red); }
        .summary-stat.total .summary-value { color: var(--accent-cyan); }

        .summary-label {
            font-size: 0.65rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .owner-suites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 1rem;
            padding: 1.5rem;
        }

        .owner-suite-card {
            background: var(--bg-hover);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .owner-suite-card:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0, 240, 255, 0.15);
        }

        .owner-suite-card.passed { border-left: 4px solid var(--accent-green); }
        .owner-suite-card.failed { border-left: 4px solid var(--accent-red); }
        .owner-suite-card.in_progress { border-left: 4px solid var(--accent-yellow); }
        .owner-suite-card.has-report { border-left: 4px solid var(--accent-green); }
        .owner-suite-card.no-runs { border-left: 4px solid var(--text-muted); opacity: 0.7; }

        .owner-suite-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .owner-suite-name {
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .owner-suite-name .suite-category {
            font-size: 0.7rem;
            color: var(--accent-purple);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .owner-suite-status {
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            flex-shrink: 0;
        }

        .owner-suite-status.passed { background: rgba(0, 255, 136, 0.15); color: var(--accent-green); }
        .owner-suite-status.failed { background: rgba(255, 56, 96, 0.15); color: var(--accent-red); }
        .owner-suite-status.in_progress { background: rgba(255, 221, 0, 0.15); color: var(--accent-yellow); }
        .owner-suite-status.no-runs { background: rgba(122, 133, 153, 0.15); color: var(--text-secondary); }

        .owner-suite-stats {
            display: flex;
            gap: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
        }

        .owner-suite-stats .passed { color: var(--accent-green); }
        .owner-suite-stats .failed { color: var(--accent-red); }
        .owner-suite-stats .total { color: var(--text-secondary); }

        .owner-suite-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }

        .owner-suite-meta span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .owner-detail-card {
            margin-top: 1.5rem;
        }

        .no-owner-suites {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .no-owner-suites-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .direct-report-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: rgba(0, 240, 255, 0.15);
            border: 1px solid var(--accent-cyan);
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            margin-left: auto;
        }

        .direct-report-link:hover {
            background: rgba(0, 240, 255, 0.3);
            transform: scale(1.1);
            box-shadow: var(--glow-cyan);
        }

        .owner-suite-card {
            cursor: pointer;
        }

        .owner-suite-card.no-runs {
            cursor: default;
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üìä</div>
                <h1>ReportPortal</h1>
            </div>
        </header>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="main">
                <span>üîç</span> Suite Report
            </button>
            <button class="tab-btn" data-tab="owner">
                <span>üîå</span> API Owners
            </button>
            <button class="tab-btn" data-tab="uiowner">
                <span>üñ•Ô∏è</span> UI Owners
            </button>
            <button class="tab-btn" data-tab="restapi">
                <span>üóÇÔ∏è</span> REST API Reports
            </button>
        </div>

        <!-- Suite Report Tab -->
        <div class="tab-content active" id="mainTab">
            <div class="main-controls">
                <div class="form-group">
                    <label>Environment</label>
                    <div class="select-wrapper">
                        <select id="envSelect">
                            <option value="staging_suites">QA Staging</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Test Suite</label>
                    <div class="select-wrapper">
                        <select id="suiteSelect">
                            <option value="">-- Select a Test Suite --</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Filter by Date</label>
                    <div class="date-picker-wrapper">
                        <input type="date" id="suiteReportDateFilter" class="date-picker-input">
                        <button id="clearSuiteDateFilter" class="clear-date-btn-inline" title="Clear date">‚úï</button>
                    </div>
                </div>
                <button class="btn-primary" id="fetchReportBtn" disabled>
                    <span>üîç</span> Get Report
                </button>
            </div>

            <div id="mainEmptyState" class="empty-state">
                <div class="empty-state-icon">üìã</div>
                <h3>Select a Test Suite</h3>
                <p>Choose an environment, test suite, and optionally a date to view reports</p>
            </div>

            <div id="mainLoadingState" class="loading-state hidden">
                <div class="spinner"></div>
                <p>Fetching reports...</p>
            </div>

            <!-- Multiple Reports List (shown when date filter is active) -->
            <div id="reportsListContainer" class="reports-list hidden">
                <div class="reports-list-header">
                    <span>üìä</span> <span id="reportsListTitle">Reports</span>
                </div>
                <div class="reports-grid" id="reportsGrid"></div>
            </div>

            <div id="mainReportCard" class="report-card hidden">
                <div class="report-header">
                    <button class="back-btn hidden" id="backToReportsList" style="margin-right: 1rem;">‚Üê Back to List</button>
                    <div class="report-title" id="reportSuiteName">-</div>
                    <div class="status-badge" id="reportStatus">-</div>
                </div>
                <div class="report-stats">
                    <div class="report-stat"><div class="report-stat-value total" id="reportTotal">0</div><div class="report-stat-label">Total Tests</div></div>
                    <div class="report-stat"><div class="report-stat-value passed" id="reportPassed">0</div><div class="report-stat-label">Passed</div></div>
                    <div class="report-stat"><div class="report-stat-value failed" id="reportFailed">0</div><div class="report-stat-label">Failed</div></div>
                    <div class="report-stat"><div class="report-stat-value duration" id="reportDuration">0m</div><div class="report-stat-label">Duration</div></div>
                </div>
                <div class="report-meta">
                    <div class="meta-item"><span class="meta-label">Launch ID</span><span class="meta-value" id="reportLaunchId">-</span></div>
                    <div class="meta-item"><span class="meta-label">Run Number</span><span class="meta-value" id="reportRunNumber">-</span></div>
                    <div class="meta-item"><span class="meta-label">Build Date</span><span class="meta-value" id="reportBuildDate">-</span></div>
                    <div class="meta-item"><span class="meta-label">Owner</span><span class="meta-value" id="reportOwner">-</span></div>
                    <div class="meta-item"><span class="meta-label">Platform</span><span class="meta-value" id="reportPlatform">-</span></div>
                    <div class="meta-item"><span class="meta-label">Actions</span><a href="#" class="link-btn" id="reportLink" target="_blank">üîó View in ReportPortal</a></div>
                </div>
                <div class="failed-tests-panel hidden" id="reportFailedPanel">
                    <div class="failed-tests-header"><span>‚ùå</span> Failed Test Cases</div>
                    <div class="failed-test-list" id="reportFailedList"></div>
                </div>
            </div>
        </div>

        <!-- API Owners Tab -->
        <div class="tab-content" id="ownerTab">
            <div class="owner-controls">
                <div class="form-group">
                    <label>Environment</label>
                    <div class="select-wrapper">
                        <select id="ownerEnvSelect">
                            <option value="staging">Staging</option>
                            <option value="qa">QA</option>
                            <option value="iaqa">IAQA</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Owner</label>
                    <div class="select-wrapper">
                        <select id="ownerSelect">
                            <option value="">-- Select an API Owner --</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Filter by Date</label>
                    <div class="date-picker-wrapper">
                        <input type="date" id="ownerDateFilter" class="date-picker-input">
                        <button id="clearOwnerDateFilter" class="clear-date-btn-inline" title="Clear date">‚úï</button>
                    </div>
                </div>
                <button class="btn-primary" id="fetchOwnerSuitesBtn" disabled>
                    <span>üîç</span> Get Suites
                </button>
            </div>

            <div id="ownerEmptyState" class="empty-state">
                <div class="empty-state-icon">üîå</div>
                <h3>Select an API Owner</h3>
                <p>Choose an environment, API owner, and optionally a date to view their REST API test suites</p>
            </div>

            <div id="ownerLoadingState" class="loading-state hidden">
                <div class="spinner"></div>
                <p>Fetching owner suites...</p>
            </div>

            <div id="ownerSuitesContainer" class="owner-suites-container hidden">
                <div class="owner-suites-header">
                    <div class="owner-info">
                        <span class="owner-avatar">üë§</span>
                        <div class="owner-details">
                            <h3 id="selectedOwnerName">-</h3>
                            <span id="selectedOwnerStats" class="owner-stats">-</span>
                        </div>
                    </div>
                    <div class="owner-summary">
                        <div class="summary-stat passed">
                            <span class="summary-value" id="ownerPassedCount">0</span>
                            <span class="summary-label">With Reports</span>
                        </div>
                        <div class="summary-stat failed">
                            <span class="summary-value" id="ownerFailedCount">0</span>
                            <span class="summary-label">No Reports</span>
                        </div>
                        <div class="summary-stat total">
                            <span class="summary-value" id="ownerTotalCount">0</span>
                            <span class="summary-label">Total Suites</span>
                        </div>
                    </div>
                </div>
                <div class="owner-suites-grid" id="ownerSuitesGrid"></div>
            </div>

            <!-- Owner Suite Detail Modal -->
            <div id="ownerSuiteDetailCard" class="report-card hidden owner-detail-card">
                <div class="report-header">
                    <button class="back-btn" id="backToOwnerSuites">‚Üê Back to API Owners</button>
                    <div class="report-title" id="ownerDetailSuiteName">-</div>
                    <div class="status-badge" id="ownerDetailStatus">-</div>
                </div>
                <div class="report-stats">
                    <div class="report-stat"><div class="report-stat-value total" id="ownerDetailTotal">0</div><div class="report-stat-label">Total Tests</div></div>
                    <div class="report-stat"><div class="report-stat-value passed" id="ownerDetailPassed">0</div><div class="report-stat-label">Passed</div></div>
                    <div class="report-stat"><div class="report-stat-value failed" id="ownerDetailFailed">0</div><div class="report-stat-label">Failed</div></div>
                    <div class="report-stat"><div class="report-stat-value duration" id="ownerDetailDuration">0m</div><div class="report-stat-label">Duration</div></div>
                </div>
                <div class="report-meta">
                    <div class="meta-item"><span class="meta-label">Launch ID</span><span class="meta-value" id="ownerDetailLaunchId">-</span></div>
                    <div class="meta-item"><span class="meta-label">Run Number</span><span class="meta-value" id="ownerDetailRunNumber">-</span></div>
                    <div class="meta-item"><span class="meta-label">Build Date</span><span class="meta-value" id="ownerDetailBuildDate">-</span></div>
                    <div class="meta-item"><span class="meta-label">Owner</span><span class="meta-value" id="ownerDetailOwner">-</span></div>
                    <div class="meta-item"><span class="meta-label">Platform</span><span class="meta-value" id="ownerDetailPlatform">-</span></div>
                    <div class="meta-item"><span class="meta-label">Actions</span><a href="#" class="link-btn" id="ownerDetailLink" target="_blank">üîó View in ReportPortal</a></div>
                </div>
                <div class="failed-tests-panel hidden" id="ownerDetailFailedPanel">
                    <div class="failed-tests-header"><span>‚ùå</span> Failed Test Cases</div>
                    <div class="failed-test-list" id="ownerDetailFailedList"></div>
                </div>
            </div>
        </div>

        <!-- REST API Reports Tab -->
        
        <!-- UI Owners Tab -->
        <div class="tab-content" id="uiownerTab">
            <div class="owner-controls">
                <div class="form-group">
                    <label>Environment</label>
                    <div class="select-wrapper">
                        <select id="uiOwnerEnvSelect">
                            <option value="staging">Staging</option>
                            <option value="qa">QA</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Owner</label>
                    <div class="select-wrapper">
                        <select id="uiOwnerSelect">
                            <option value="">-- Select a UI Owner --</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Filter by Date</label>
                    <div class="date-picker-wrapper">
                        <input type="date" id="uiOwnerDateFilter" class="date-picker-input">
                        <button id="clearUiOwnerDateFilter" class="clear-date-btn-inline" title="Clear date">‚úï</button>
                    </div>
                </div>
                <button class="btn-primary" id="fetchUiOwnerSuitesBtn" disabled>
                    <span>üîç</span> Get Suites
                </button>
            </div>

            <div id="uiOwnerEmptyState" class="empty-state">
                <div class="empty-state-icon">üñ•Ô∏è</div>
                <h3>Select a UI Owner</h3>
                <p>Choose an environment, UI owner, and optionally a date to view their UI test suites</p>
            </div>

            <div id="uiOwnerLoadingState" class="loading-state hidden">
                <div class="spinner"></div>
                <p>Fetching UI owner suites...</p>
            </div>

            <div id="uiOwnerSuitesContainer" class="owner-suites-container hidden">
                <div class="owner-suites-header">
                    <div class="owner-info">
                        <span class="owner-avatar">üë§</span>
                        <div class="owner-details">
                            <h3 id="selectedUiOwnerName">-</h3>
                            <span id="selectedUiOwnerStats" class="owner-stats">-</span>
                        </div>
                    </div>
                    <div class="owner-summary">
                        <div class="summary-stat passed">
                            <span class="summary-value" id="uiOwnerPassedCount">0</span>
                            <span class="summary-label">With Reports</span>
                        </div>
                        <div class="summary-stat failed">
                            <span class="summary-value" id="uiOwnerFailedCount">0</span>
                            <span class="summary-label">No Reports</span>
                        </div>
                        <div class="summary-stat total">
                            <span class="summary-value" id="uiOwnerTotalCount">0</span>
                            <span class="summary-label">Total Suites</span>
                        </div>
                    </div>
                </div>
                <div class="owner-suites-grid" id="uiOwnerSuitesGrid"></div>
            </div>
        </div>

        <div class="tab-content" id="restapiTab">
            <div class="restapi-controls">
                <button class="back-btn hidden" id="restapiBackBtn">‚Üê Back</button>
                <div class="breadcrumb" id="breadcrumb">
                    <span class="breadcrumb-item" data-path="/">üè† Home</span>
                </div>
                <div class="restapi-filters">
                    <div class="restapi-search">
                        <input type="text" id="restapiSearch" placeholder="üîç Search projects..." class="search-input">
                    </div>
                    <div class="date-filter hidden" id="dateFilterContainer">
                        <label class="date-filter-label">üìÖ Filter by Date:</label>
                        <input type="date" id="dateFilter" class="date-input">
                        <button id="clearDateFilter" class="clear-date-btn" title="Clear date filter">‚úï</button>
                    </div>
                </div>
            </div>

            <div id="restapiLoading" class="loading-state">
                <div class="spinner"></div>
                <p>Loading directories...</p>
            </div>

            <div id="restapiContent" class="restapi-content hidden">
                <div class="restapi-grid" id="restapiGrid"></div>
            </div>

            <div id="restapiReport" class="restapi-report hidden">
                <div class="report-viewer">
                    <div class="report-viewer-header">
                        <button class="back-btn" id="backToList">‚Üê Back to List</button>
                        <a href="#" id="openInNewTab" target="_blank" class="link-btn">üîó Open Report</a>
                    </div>
                    <iframe id="reportFrame" class="report-frame"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            RP_HOST: window.location.origin,
            RP_PROJECT: 'staging_suites',
            RP_DIRECT: 'https://reportportal.qa.staging.integrator.io'
        };

        let allSuites = [];
        let currentProject = 'staging_suites';
        
        // Cache suites per environment to avoid re-fetching
        const suitesCache = {};

        document.addEventListener('DOMContentLoaded', async () => {
            setupTabs();
            await loadEnvironments();
            await setupMainDashboard();
        });

        // Load available environments/projects (only QA, IAQA, Staging)
        async function loadEnvironments() {
            const envSelect = document.getElementById('envSelect');
            
            // Only these 3 environments
            const environments = [
                { value: 'staging_suites', name: 'Staging' },
                { value: 'qa_suites', name: 'QA' },
                { value: 'iaqa_suites', name: 'IAQA' }
            ];
            
            envSelect.innerHTML = environments.map(env => {
                const selected = env.value === currentProject ? 'selected' : '';
                return `<option value="${env.value}" ${selected}>${env.name}</option>`;
            }).join('');

            // Handle environment change
            envSelect.addEventListener('change', async () => {
                currentProject = envSelect.value;
                CONFIG.RP_PROJECT = currentProject;
                await setupMainDashboard();
            });
        }

        // Initialize REST API Reports when tab is first shown
        let restApiInitialized = false;

        // Tab Navigation with lazy initialization
        function setupTabs() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab + 'Tab').classList.add('active');

                    // Initialize REST API reports on first view
                    if (btn.dataset.tab === 'restapi' && !restApiInitialized) {
                        restApiInitialized = true;
                        setupRestApiReportsListeners();
                        initRestApiReports();
                    }
                });
            });
        }

        // ==================== SUITE REPORT ====================
        async function setupMainDashboard() {
            const suiteSelect = document.getElementById('suiteSelect');
            const fetchBtn = document.getElementById('fetchReportBtn');
            const project = currentProject;

            console.log(`Setting up dashboard for project: ${project}`);

            // Check cache first
            if (suitesCache[project]) {
                console.log(`Using cached suites for ${project}`);
                renderSuiteDropdown(suitesCache[project], suiteSelect);
                return;
            }

            // Show loading state
            suiteSelect.innerHTML = '<option value="">‚è≥ Loading suites...</option>';
            suiteSelect.disabled = true;
            if (fetchBtn) fetchBtn.disabled = true;

            try {
                const allSuiteNames = new Set();
                
                // Get first page to know total pages
                const firstResponse = await fetch(
                    `${CONFIG.RP_HOST}/api/v1/${project}/launch?page.size=300&page.page=1`
                );
                const firstPage = await firstResponse.json();
                
                if (firstPage.errorCode) {
                    throw new Error(firstPage.message || 'API Error');
                }
                
                const totalPages = Math.min(firstPage.page.totalPages, 10); // Max 10 pages
                firstPage.content.forEach(l => allSuiteNames.add(l.name));
                console.log(`Project ${project}: ${firstPage.page.totalElements} launches, ${totalPages} pages to fetch`);

                // Fetch remaining pages in parallel batches of 3
                if (totalPages > 1) {
                    for (let page = 2; page <= totalPages; page += 3) {
                        const batch = [];
                        for (let p = page; p < page + 3 && p <= totalPages; p++) {
                            batch.push(
                                fetch(`${CONFIG.RP_HOST}/api/v1/${project}/launch?page.size=300&page.page=${p}`)
                                    .then(r => r.json())
                            );
                        }
                        const results = await Promise.all(batch);
                        results.forEach(data => {
                            if (data.content) {
                                data.content.forEach(l => allSuiteNames.add(l.name));
                            }
                        });
                    }
                }

                const suiteNames = [...allSuiteNames].sort();
                console.log(`Loaded ${suiteNames.length} unique suites for ${project}`);
                
                // Cache the results
                suitesCache[project] = suiteNames;
                
                renderSuiteDropdown(suiteNames, suiteSelect);
                
            } catch (e) {
                console.error(`Error loading suites for ${project}:`, e);
                suiteSelect.innerHTML = `<option value="">Error: ${e.message}</option>`;
            } finally {
                suiteSelect.disabled = false;
                if (fetchBtn) fetchBtn.disabled = true; // Keep disabled until suite selected
            }

            // Setup event listeners (only once)
            if (!suiteSelect.hasAttribute('data-listeners-added')) {
                suiteSelect.setAttribute('data-listeners-added', 'true');
                
                suiteSelect.addEventListener('change', () => {
                    const btn = document.getElementById('fetchReportBtn');
                    if (btn) btn.disabled = !suiteSelect.value;
                    if (suiteSelect.value) fetchReport();
                });

                if (fetchBtn) {
                    fetchBtn.addEventListener('click', fetchReport);
                }

                // Date filter listeners
                const dateFilter = document.getElementById('suiteReportDateFilter');
                const clearDateBtn = document.getElementById('clearSuiteDateFilter');
                
                if (dateFilter) {
                    dateFilter.addEventListener('change', () => {
                        if (suiteSelect.value) {
                            fetchReport();
                        }
                    });
                }

                if (clearDateBtn) {
                    clearDateBtn.addEventListener('click', () => {
                        if (dateFilter) {
                            dateFilter.value = '';
                            // Clear cached list
                            cachedReportsList = null;
                            cachedDateFilter = null;
                            cachedSuiteName = null;
                            // Hide reports list and back button
                            document.getElementById('reportsListContainer').classList.add('hidden');
                            document.getElementById('backToReportsList').classList.add('hidden');
                            if (suiteSelect.value) {
                                fetchReport();
                            }
                        }
                    });
                }

                // Back to reports list button
                const backToListBtn = document.getElementById('backToReportsList');
                if (backToListBtn) {
                    backToListBtn.addEventListener('click', goBackToReportsList);
                }
            }
        }

        function renderSuiteDropdown(suiteNames, suiteSelect) {
            // Group suites
            const grouped = {};
            suiteNames.forEach(name => {
                const cat = name.includes('UI_AUTOMATION') ? 'UI Automation' : 
                           name.startsWith('PLATFORM_API_') ? 'API Automation' : 
                           name.startsWith('IA_API_') ? 'IA API' : 'Other';
                if (!grouped[cat]) grouped[cat] = [];
                grouped[cat].push(name);
            });

            let html = '<option value="">-- Select a Test Suite --</option>';
            // Sort categories to put UI Automation first
            const sortedCats = Object.keys(grouped).sort((a, b) => {
                if (a === 'UI Automation') return -1;
                if (b === 'UI Automation') return 1;
                return a.localeCompare(b);
            });
            
            sortedCats.forEach(cat => {
                const count = grouped[cat].length;
                html += `<optgroup label="${cat} (${count})">`;
                grouped[cat].forEach(name => {
                    const short = name
                        .replace('PLATFORM_UI_AUTOMATION_', '')
                        .replace('PLATFORM_API_', '')
                        .replace('IA_API_', '')
                        .replace(/_/g, ' ');
                    html += `<option value="${name}">${short}</option>`;
                });
                html += '</optgroup>';
            });
            suiteSelect.innerHTML = html;
        }

        async function fetchReport() {
            const suiteName = document.getElementById('suiteSelect').value;
            const dateFilter = document.getElementById('suiteReportDateFilter').value;
            if (!suiteName) return;

            document.getElementById('mainEmptyState').classList.add('hidden');
            document.getElementById('mainReportCard').classList.add('hidden');
            document.getElementById('reportsListContainer').classList.add('hidden');
            document.getElementById('mainLoadingState').classList.remove('hidden');

            try {
                // Build the API URL with optional date filter
                let apiUrl = `${CONFIG.RP_HOST}/api/v1/${CONFIG.RP_PROJECT}/launch?filter.eq.name=${encodeURIComponent(suiteName)}&page.sort=startTime,desc`;
                
                if (dateFilter) {
                    // Filter by date: get all reports from that day using gte and lte filters
                    const startOfDay = new Date(dateFilter + 'T00:00:00');
                    const endOfDay = new Date(dateFilter + 'T23:59:59.999');
                    
                    apiUrl += `&filter.gte.startTime=${startOfDay.getTime()}&filter.lte.startTime=${endOfDay.getTime()}&page.size=50`;
                } else {
                    // No date filter: get latest report only
                    apiUrl += '&page.size=1';
                }

                const response = await fetch(apiUrl);
                const data = await response.json();

                if (!data.content || !data.content.length) {
                    document.getElementById('mainLoadingState').classList.add('hidden');
                    if (dateFilter) {
                        // Show no results message for date filter
                        const reportsGrid = document.getElementById('reportsGrid');
                        reportsGrid.innerHTML = `
                            <div class="no-results-message" style="grid-column: 1 / -1;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì≠</div>
                                <h4>No Reports Found</h4>
                                <p>No test runs found for "${formatSuiteName(suiteName)}" on ${formatDateDisplay(dateFilter)}</p>
                            </div>
                        `;
                        document.getElementById('reportsListTitle').textContent = `Reports for ${formatDateDisplay(dateFilter)}`;
                        document.getElementById('reportsListContainer').classList.remove('hidden');
                    } else {
                    document.getElementById('mainEmptyState').classList.remove('hidden');
                    }
                    return;
                }

                // If date filter is active, show multiple reports
                if (dateFilter && data.content.length > 0) {
                    renderMultipleReports(data.content, dateFilter, suiteName);
                } else {
                    // Show single report (latest) - clear cache since not from list
                    cachedReportsList = null;
                    cachedDateFilter = null;
                    cachedSuiteName = null;
                    document.getElementById('backToReportsList').classList.add('hidden');
                    renderSingleReport(data.content[0]);
                }

            } catch (e) {
                console.error('Error fetching report:', e);
                document.getElementById('mainLoadingState').classList.add('hidden');
                document.getElementById('mainEmptyState').classList.remove('hidden');
            }
        }

        function renderMultipleReports(launches, dateFilter, suiteName) {
            const reportsGrid = document.getElementById('reportsGrid');
            
            // Cache the list for back navigation
            cachedReportsList = launches;
            cachedDateFilter = dateFilter;
            cachedSuiteName = suiteName;
            
            // Hide back button when showing list
            document.getElementById('backToReportsList').classList.add('hidden');
            
            document.getElementById('reportsListTitle').textContent = 
                `${launches.length} Report${launches.length > 1 ? 's' : ''} for ${formatDateDisplay(dateFilter)}`;
            
            reportsGrid.innerHTML = launches.map(launch => {
                const stats = launch.statistics?.executions || {};
                const time = new Date(launch.startTime).toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true 
                });
                const duration = Math.round((launch.approximateDuration || 0) / 60);
                
                return `
                    <div class="report-card-mini ${launch.status.toLowerCase()}" 
                         data-launch-id="${launch.id}" 
                         onclick="selectReport(${launch.id}, '${suiteName.replace(/'/g, "\\'")}')">
                        <div class="report-card-mini-header">
                            <div class="report-card-mini-title">
                                <span>#${launch.number}</span>
                            </div>
                            <div class="report-card-mini-status ${launch.status.toLowerCase()}">${launch.status}</div>
                        </div>
                        <div class="report-card-mini-stats">
                            <span class="passed">‚úì ${stats.passed || 0}</span>
                            <span class="failed">‚úó ${stats.failed || 0}</span>
                            <span style="color: var(--text-secondary)">Total: ${stats.total || 0}</span>
                        </div>
                        <div class="report-card-mini-meta">
                            <span>üïê ${time}</span>
                            <span>‚è±Ô∏è ${duration}m</span>
                            <span>üë§ ${launch.owner || 'Unknown'}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('mainLoadingState').classList.add('hidden');
            document.getElementById('reportsListContainer').classList.remove('hidden');
        }

        let cachedReportsList = null;
        let cachedDateFilter = null;
        let cachedSuiteName = null;

        async function selectReport(launchId, suiteName) {
            document.getElementById('reportsListContainer').classList.add('hidden');
            document.getElementById('mainLoadingState').classList.remove('hidden');
            
            try {
                const response = await fetch(
                    `${CONFIG.RP_HOST}/api/v1/${CONFIG.RP_PROJECT}/launch/${launchId}`
                );
                const launch = await response.json();
                
                // Show back button if we came from a list
                const backBtn = document.getElementById('backToReportsList');
                if (backBtn && cachedReportsList) {
                    backBtn.classList.remove('hidden');
                }
                
                renderSingleReport(launch);
            } catch (e) {
                console.error('Error fetching report details:', e);
                document.getElementById('mainLoadingState').classList.add('hidden');
                document.getElementById('reportsListContainer').classList.remove('hidden');
            }
        }

        function goBackToReportsList() {
            if (cachedReportsList && cachedDateFilter && cachedSuiteName) {
                document.getElementById('mainReportCard').classList.add('hidden');
                document.getElementById('backToReportsList').classList.add('hidden');
                renderMultipleReports(cachedReportsList, cachedDateFilter, cachedSuiteName);
            }
        }

        async function renderSingleReport(launch) {
                const stats = launch.statistics?.executions || {};

                document.getElementById('reportSuiteName').textContent = launch.name;
                document.getElementById('reportStatus').textContent = launch.status;
                document.getElementById('reportStatus').className = `status-badge ${launch.status.toLowerCase()}`;
                document.getElementById('reportTotal').textContent = stats.total || 0;
                document.getElementById('reportPassed').textContent = stats.passed || 0;
                document.getElementById('reportFailed').textContent = stats.failed || 0;
            document.getElementById('reportDuration').textContent = Math.round((launch.approximateDuration || 0) / 60) + 'm';
                document.getElementById('reportLaunchId').textContent = launch.id;
                document.getElementById('reportRunNumber').textContent = '#' + launch.number;
                document.getElementById('reportBuildDate').textContent = launch.attributes?.find(a => a.key === 'Build')?.value || 'N/A';
                document.getElementById('reportOwner').textContent = launch.owner || 'N/A';
                document.getElementById('reportPlatform').textContent = launch.attributes?.find(a => a.key === 'Platform')?.value || 'N/A';
                document.getElementById('reportLink').href = `${CONFIG.RP_DIRECT}/ui/#${CONFIG.RP_PROJECT}/launches/all/${launch.id}`;

                // Failed tests
                if (stats.failed > 0) {
                    const failedResponse = await fetch(
                        `${CONFIG.RP_HOST}/api/v1/${CONFIG.RP_PROJECT}/item?filter.eq.launchId=${launch.id}&filter.eq.status=FAILED&page.size=20`
                    );
                    const failedData = await failedResponse.json();
                    const failedTests = failedData.content.filter(i => i.type === 'STEP');

                    document.getElementById('reportFailedList').innerHTML = failedTests.map((test, i) => `
                        <div class="failed-test-item">
                            <div class="failed-test-num">${i + 1}</div>
                            <div class="failed-test-name">${test.name}</div>
                        </div>
                    `).join('');
                    document.getElementById('reportFailedPanel').classList.remove('hidden');
                } else {
                    document.getElementById('reportFailedPanel').classList.add('hidden');
                }

                document.getElementById('mainLoadingState').classList.add('hidden');
                document.getElementById('mainReportCard').classList.remove('hidden');
        }

        function formatDateDisplay(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric' 
            });
        }

        // ==================== HELPERS ====================
        function getStatusIcon(status) {
            switch (status) {
                case 'PASSED': return '‚úì';
                case 'FAILED': return '‚úó';
                case 'IN_PROGRESS': return '‚óå';
                default: return '?';
            }
        }

        function formatSuiteName(name) {
            return name
                .replace('PLATFORM_UI_AUTOMATION_', '')
                .replace('PLATFORM_API_', '')
                .replace(/_AUTOMATION_TESTS_STAGING/g, '')
                .replace(/_/g, ' ')
                .substring(0, 40);
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = Math.floor((now - date) / 1000 / 60);
            if (diff < 1) return 'Just now';
            if (diff < 60) return `${diff}m ago`;
            if (diff < 1440) return `${Math.floor(diff / 60)}h ago`;
            return date.toLocaleDateString();
        }

        // ==================== REST API REPORTS ====================
        const REST_REPORTS_CONFIG = {
            baseUrl: window.location.origin + '/rest-reports',
            directUrl: 'https://reporting-portal.qa.staging.integrator.io'
        };

        let currentPath = '/';
        let allDirectories = [];
        let isInEnvFolder = false;
        let navigationHistory = []; // Track navigation history for back button
        const ENV_FOLDERS = ['ci', 'qa', 'iaqa', 'staging', 'qaprod', 'cd'];

        async function initRestApiReports() {
            await fetchDirectory('/');
        }

        async function fetchDirectory(path) {
            const loading = document.getElementById('restapiLoading');
            const content = document.getElementById('restapiContent');
            const report = document.getElementById('restapiReport');
            const searchInput = document.getElementById('restapiSearch');
            const dateFilterContainer = document.getElementById('dateFilterContainer');
            const dateFilter = document.getElementById('dateFilter');

            // Clear search when navigating to a new folder
            if (searchInput) {
                searchInput.value = '';
            }

            // Clear date filter when navigating
            if (dateFilter) {
                dateFilter.value = '';
            }

            loading.classList.remove('hidden');
            content.classList.add('hidden');
            report.classList.add('hidden');

            currentPath = path;
            updateBreadcrumb(path);

            // Check if we're navigating INTO an environment folder
            const pathParts = path.split('/').filter(p => p);
            const lastFolder = pathParts[pathParts.length - 1]?.toLowerCase();
            isInEnvFolder = ENV_FOLDERS.includes(lastFolder);

            // Show/hide date filter based on whether we're in an env folder
            if (dateFilterContainer) {
                if (isInEnvFolder) {
                    dateFilterContainer.classList.remove('hidden');
                } else {
                    dateFilterContainer.classList.add('hidden');
                }
            }

            try {
                // Add cache-busting parameter to ensure fresh data
                const cacheBuster = `_t=${Date.now()}`;
                const response = await fetch(`${REST_REPORTS_CONFIG.baseUrl}/?path=/var/www/html${path === '/' ? '' : path}&${cacheBuster}`, {
                    cache: 'no-store'
                });
                const html = await response.text();
                
                // Check if this is a report page (has Test Report heading) rather than directory listing
                if (html.includes('<h1>Test Report</h1>') || html.includes('class="test-report"')) {
                    // This is a report, show it in the viewer
                    openReport(path);
                    return;
                }
                
                const directories = parseDirectoryListing(html, path);
                allDirectories = directories;
                
                // If directory is empty but path contains a timestamp pattern, try to open as report
                if (directories.length === 0 && /[A-Za-z]{3}_\d{2}_\d{4}/.test(path)) {
                    openReport(path);
                    return;
                }
                
                renderDirectories(directories);

                loading.classList.add('hidden');
                content.classList.remove('hidden');
            } catch (error) {
                console.error('Error fetching directory:', error);
                loading.classList.add('hidden');
                content.innerHTML = `<div class="empty-state"><p>Error loading directory: ${error.message}</p></div>`;
                content.classList.remove('hidden');
            }
        }

        function parseDirectoryListing(html, currentPath) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const rows = doc.querySelectorAll('table tr');
            const items = [];

            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 3) {
                    const typeCell = cells[0].textContent.trim();
                    const nameCell = cells[1].textContent.trim();
                    const linkCell = cells[2].querySelector('a');

                    if (nameCell && linkCell && !nameCell.includes('Back to Parent')) {
                        const isDirectory = typeCell.includes('Directory');
                        const href = linkCell.getAttribute('href');
                        
                        // Parse the path from the href
                        let itemPath = '';
                        if (href && href.includes('path=')) {
                            const pathMatch = href.match(/path=([^&]+)/);
                            if (pathMatch) {
                                itemPath = decodeURIComponent(pathMatch[1]).replace('/var/www/html', '');
                            }
                        }

                        items.push({
                            name: nameCell,
                            type: isDirectory ? 'directory' : 'file',
                            path: itemPath || `${currentPath === '/' ? '' : currentPath}/${nameCell}`,
                            timestamp: extractTimestamp(nameCell)
                        });
                    }
                }
            });

            // Sort: directories first, then by name
            return items.sort((a, b) => {
                if (a.type !== b.type) return a.type === 'directory' ? -1 : 1;
                return a.name.localeCompare(b.name);
            });
        }

        function extractTimestamp(name) {
            // Extract timestamp from names like "Nov_21_2025_03_45_rest_api_rest-api-automation"
            const match = name.match(/([A-Za-z]{3}_\d{2}_\d{4}_\d{2}_\d{2})/);
            if (match) {
                const parts = match[1].split('_');
                return `${parts[0]} ${parts[1]}, ${parts[2]} ${parts[3]}:${parts[4]}`;
            }
            return null;
        }

        function renderDirectories(items) {
            const grid = document.getElementById('restapiGrid');
            const searchValue = document.getElementById('restapiSearch').value.toLowerCase();
            const dateFilterValue = document.getElementById('dateFilter')?.value;

            // Apply search filter
            let filtered = searchValue 
                ? items.filter(item => item.name.toLowerCase().includes(searchValue))
                : items;

            // Apply date filter if we're in an env folder and a date is selected
            if (isInEnvFolder && dateFilterValue) {
                const selectedDate = new Date(dateFilterValue);
                const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                const month = monthNames[selectedDate.getMonth()];
                const day = String(selectedDate.getDate()).padStart(2, '0');
                const year = selectedDate.getFullYear();
                
                // Create pattern to match: "Mon_DD_YYYY" format in folder names
                const datePattern = `${month}_${day}_${year}`;
                
                filtered = filtered.filter(item => {
                    return item.name.includes(datePattern);
                });
            }

            const hasFilters = searchValue || (isInEnvFolder && dateFilterValue);
            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1; padding: 3rem;">
                        <div class="empty-state-icon">üìÅ</div>
                        <h3>No items found</h3>
                        <p>${hasFilters ? 'Try adjusting your filters' : 'This directory is empty'}</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filtered.map(item => `
                <div class="restapi-card ${item.type}" data-path="${item.path}" data-type="${item.type}">
                    <div class="restapi-card-icon">${item.type === 'directory' ? 'üìÅ' : 'üìÑ'}</div>
                    <div class="restapi-card-info">
                        <div class="restapi-card-name" title="${item.name}">${formatProjectName(item.name)}</div>
                        <div class="restapi-card-meta">
                            ${item.timestamp || (item.type === 'directory' ? 'Directory' : 'Report')}
                        </div>
                    </div>
                </div>
            `).join('');

            // Add click handlers
            grid.querySelectorAll('.restapi-card').forEach(card => {
                card.addEventListener('click', () => {
                    const path = card.dataset.path;
                    const type = card.dataset.type;

                    if (type === 'directory') {
                        navigateToPath(path);
                    } else {
                        navigationHistory.push(currentPath); // Track before opening report
                        openReport(path);
                    }
                });
            });
        }

        function formatProjectName(name) {
            // Clean up common prefixes and make it more readable
            return name
                .replace(/^[A-Za-z]{3}_\d{2}_\d{4}_\d{2}_\d{2}_/, '')
                .replace(/_/g, ' ')
                .substring(0, 40) + (name.length > 40 ? '...' : '');
        }

        function updateBreadcrumb(path) {
            const breadcrumb = document.getElementById('breadcrumb');
            const backBtn = document.getElementById('restapiBackBtn');
            const parts = path.split('/').filter(p => p);

            // Show/hide back button based on whether we're at root
            if (backBtn) {
                if (parts.length > 0) {
                    backBtn.classList.remove('hidden');
                } else {
                    backBtn.classList.add('hidden');
                }
            }

            let html = `<span class="breadcrumb-item ${parts.length === 0 ? 'active' : ''}" data-path="/">üè† Home</span>`;

            let currentPathBuild = '';
            parts.forEach((part, index) => {
                currentPathBuild += '/' + part;
                const isActive = index === parts.length - 1;
                html += `
                    <span class="breadcrumb-separator">‚Ä∫</span>
                    <span class="breadcrumb-item ${isActive ? 'active' : ''}" data-path="${currentPathBuild}">
                        ${formatProjectName(part)}
                    </span>
                `;
            });

            breadcrumb.innerHTML = html;

            // Add click handlers to breadcrumb items
            breadcrumb.querySelectorAll('.breadcrumb-item').forEach(item => {
                item.addEventListener('click', () => {
                    const targetPath = item.dataset.path;
                    navigateToPath(targetPath);
                });
            });
        }

        // Navigate to path with history tracking
        function navigateToPath(targetPath) {
            // Don't add to history if going to current path
            if (targetPath !== currentPath) {
                navigationHistory.push(currentPath);
            }
            fetchDirectory(targetPath);
        }

        // Go back one level in navigation history
        function navigateBack() {
            if (navigationHistory.length > 0) {
                const previousPath = navigationHistory.pop();
                fetchDirectory(previousPath);
            } else {
                // If no history, go to parent folder
                const parts = currentPath.split('/').filter(p => p);
                if (parts.length > 0) {
                    parts.pop();
                    const parentPath = parts.length > 0 ? '/' + parts.join('/') : '/';
                    fetchDirectory(parentPath);
                }
            }
        }

        async function openReport(path) {
            const loading = document.getElementById('restapiLoading');
            const content = document.getElementById('restapiContent');
            const report = document.getElementById('restapiReport');
            const frame = document.getElementById('reportFrame');
            const openLink = document.getElementById('openInNewTab');

            loading.classList.add('hidden');
            content.classList.add('hidden');

            // Check if this is a directory with index.html
            let reportUrl = `${REST_REPORTS_CONFIG.baseUrl}${path}`;
            if (!path.endsWith('.html')) {
                reportUrl = `${REST_REPORTS_CONFIG.baseUrl}${path}/index.html`;
            }

            // Direct URL for opening in new tab (with credentials)
            let directUrl = `https://portal_user:celigo%40123@${REST_REPORTS_CONFIG.directUrl.replace('https://', '')}${path}`;
            if (!path.endsWith('.html')) {
                directUrl = `https://portal_user:celigo%40123@${REST_REPORTS_CONFIG.directUrl.replace('https://', '')}${path}/index.html`;
            }

            frame.src = reportUrl;
            openLink.href = directUrl;

            report.classList.remove('hidden');
        }

        function setupRestApiReportsListeners() {
            // Search input
            const searchInput = document.getElementById('restapiSearch');
            searchInput.addEventListener('input', () => {
                renderDirectories(allDirectories);
            });

            // Date filter input
            const dateFilter = document.getElementById('dateFilter');
            dateFilter.addEventListener('change', () => {
                renderDirectories(allDirectories);
            });

            // Clear date filter button
            const clearDateBtn = document.getElementById('clearDateFilter');
            clearDateBtn.addEventListener('click', () => {
                dateFilter.value = '';
                renderDirectories(allDirectories);
            });

            // Back to list button (for report viewer)
            document.getElementById('backToList').addEventListener('click', () => {
                const report = document.getElementById('restapiReport');
                const content = document.getElementById('restapiContent');
                const frame = document.getElementById('reportFrame');

                frame.src = '';
                report.classList.add('hidden');
                content.classList.remove('hidden');
            });

            // Back navigation button
            const restapiBackBtn = document.getElementById('restapiBackBtn');
            if (restapiBackBtn) {
                restapiBackBtn.addEventListener('click', navigateBack);
            }
        }

        // ==================== OWNER SUITES ====================
        // Owner-Suite mapping from CSV data
        const OWNER_SUITE_MAPPING = [
            { category: "agent-extension", suite: "Agents", owner: "Deepak" },
            { category: "api_execution", suite: "API_BUILDER_ADAPTOR", owner: "Sathwika" },
            { category: "api_execution", suite: "APIBUILDER_SFNS_E2E", owner: "Sathwika" },
            { category: "as2-adaptor", suite: "AS2Exports", owner: "Shakeer" },
            { category: "as2-adaptor", suite: "AS2Imports", owner: "Shakeer" },
            { category: "as2-adaptor", suite: "Standalone", owner: "Shakeer" },
            { category: "as2-adaptor", suite: "VAN", owner: "Shakeer" },
            { category: "authentication-service", suite: "Email_Signup_Validation2", owner: "Ashwatha" },
            { category: "authentication-service", suite: "Optimize_signup", owner: "Naveen" },
            { category: "authentication-service", suite: "University", owner: "Gautham" },
            { category: "authentication-service", suite: "MFA", owner: "Naveen" },
            { category: "authentication-service", suite: "Phase_0_SampleIntegration_Install", owner: "Gautham" },
            { category: "authentication-service", suite: "Email_Signup_Validation", owner: "Ashwatha" },
            { category: "authentication-service", suite: "OPTIMIZE_SIGNUP2", owner: "Ashwatha" },
            { category: "authentication-service", suite: "ACCOUNTLEVELACCESS_ADMIN", owner: "Deepak" },
            { category: "COMMON_SUITES", suite: "AshareId_Related_TCs", owner: "Prerana" },
            { category: "COMMON_SUITES", suite: "Dropbox", owner: "Swathi" },
            { category: "COMMON_SUITES", suite: "Splunk", owner: "Akhil" },
            { category: "COMMON_SUITES", suite: "AccountLevelAccess", owner: "Deepak" },
            { category: "COMMON_SUITES", suite: "DI_CORE", owner: "Geethika" },
            { category: "COMMON_SUITES", suite: "SignedURL", owner: "Prerana" },
            { category: "COMMON_SUITES", suite: "AccessData", owner: "Prerana" },
            { category: "COMMON_SUITES", suite: "FileAdaptor_GeneralServices3", owner: "Swathi" },
            { category: "COMMON_SUITES", suite: "On_Prem_DB", owner: "Bhanu" },
            { category: "COMMON_SUITES", suite: "AccountLevelAccess_Monitor_Tile", owner: "Deepak" },
            { category: "COMMON_SUITES", suite: "AccountLevelAccess_Monitor", owner: "Deepak" },
            { category: "COMMON_SUITES", suite: "AccountLevelAccess_Manage_or_Monitor", owner: "Deepak" },
            { category: "COMMON_SUITES", suite: "MultiEnvironment_2", owner: "Kaivalya" },
            { category: "COMMON_SUITES", suite: "Splunk_3", owner: "Akhil" },
            { category: "COMMON_SUITES", suite: "Box_Connector", owner: "Swathi" },
            { category: "COMMON_SUITES", suite: "Splunk_2", owner: "Akhil" },
            { category: "COMMON_SUITES", suite: "Csrf_Related_TCs", owner: "Suman" },
            { category: "COMMON_SUITES", suite: "On_Prem", owner: "Bhanu" },
            { category: "COMMON_SUITES", suite: "FileAdaptor_GeneralServices", owner: "Swathi" },
            { category: "COMMON_SUITES", suite: "Csrf_Related_TCs2", owner: "Gautham" },
            { category: "COMMON_SUITES", suite: "gptverse", owner: "Randeep" },
            { category: "data-warehouse-adaptor", suite: "Snowflake_BulkLoad3", owner: "Bhanu" },
            { category: "data-warehouse-adaptor", suite: "Data_warehouse_Adaptor", owner: "Bhanu" },
            { category: "data-warehouse-adaptor", suite: "Snowflake_BulkLoad", owner: "Bhanu" },
            { category: "data-warehouse-adaptor", suite: "Snowflake_BulkLoad2", owner: "Bhanu" },
            { category: "data-warehouse-adaptor", suite: "Snowflake_BulkLoad4", owner: "Bhanu" },
            { category: "EDI-SUITES", suite: "EDI_TPConnector", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDIGlobalParser_Generator", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDI_licenses", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDIProfiles", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDI", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDI2", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDIDashboard", owner: "Shakeer" },
            { category: "EDI-SUITES", suite: "EDIProfile_ILM", owner: "Shakeer" },
            { category: "endpoint-service", suite: "Mapper2.0_Suite1", owner: "Shiva" },
            { category: "endpoint-service", suite: "MYAPI_MS", owner: "Sowmya" },
            { category: "endpoint-service", suite: "Proxy", owner: "Sowmya" },
            { category: "endpoint-service", suite: "Oauth2MS", owner: "Sowmya" },
            { category: "endpoint-service", suite: "Transformation2.0_suite2", owner: "Shiva" },
            { category: "endpoint-service", suite: "Metadata", owner: "Bhanu" },
            { category: "endpoint-service", suite: "UI2API_MAPPER2.0", owner: "Shiva" },
            { category: "endpoint-service", suite: "ResourceAliases", owner: "Anitha" },
            { category: "endpoint-service", suite: "Mapper2.0_Suite3", owner: "Shiva" },
            { category: "endpoint-service", suite: "Mapper2.0_Suite4", owner: "Shiva" },
            { category: "endpoint-service", suite: "Mapper2.0_Suite2", owner: "Shiva" },
            { category: "endpoint-service", suite: "Mapper_Preview", owner: "Shiva" },
            { category: "endpoint-service", suite: "Transformation2.0_suite1", owner: "Shiva" },
            { category: "endpoint-service", suite: "AFE", owner: "Shiva" },
            { category: "endpoint-service", suite: "ResponseHeaderToken", owner: "Sowmya" },
            { category: "endpoint-service", suite: "NETSUITE4_EP", owner: "Anitha" },
            { category: "endpoint-service", suite: "STANDALONE", owner: "Sowmya" },
            { category: "error-notifications", suite: "Notification_Emails_3", owner: "Naveen" },
            { category: "error-notifications", suite: "Notification_Emails_4", owner: "Naveen" },
            { category: "error-notifications", suite: "Notification_Emails_2", owner: "Naveen" },
            { category: "error-notifications", suite: "Notification_Emails", owner: "Naveen" },
            { category: "error-notifications", suite: "Notification_Emails_6", owner: "Naveen" },
            { category: "error-notifications", suite: "Notification_Emails_5", owner: "Naveen" },
            { category: "file-adaptor", suite: "S3_Adaptor2", owner: "Swathi" },
            { category: "file-adaptor", suite: "S3_Adaptor", owner: "Swathi" },
            { category: "file-adaptor", suite: "Dataloader", owner: "Swathi" },
            { category: "file-adaptor", suite: "HTTP_OAUTH_1.0", owner: "Swathi" },
            { category: "file-adaptor", suite: "LINEARCOMPLEX_E2E_FLOWS", owner: "Swathi" },
            { category: "file-adaptor", suite: "SPLUNK_3", owner: "Swathi" },
            { category: "file-adaptor", suite: "END_TO_END_FLOWS", owner: "Swathi" },
            { category: "file-adaptor", suite: "CONNECTIONS", owner: "Swathi" },
            { category: "file-service", suite: "FileServices", owner: "Swathi" },
            { category: "flow-management", suite: "jobs_schema", owner: "Gaurav" },
            { category: "flow-management", suite: "ETAG", owner: "Gautham" },
            { category: "flow-management", suite: "FlowDebugger", owner: "Deepak" },
            { category: "flow-management", suite: "Dashboard", owner: "Deepak" },
            { category: "flow-management", suite: "EM2.0_2", owner: "Akhil" },
            { category: "flow-management", suite: "Shopify", owner: "Naveen" },
            { category: "flow-management", suite: "FlowSchedule", owner: "Suman" },
            { category: "flow-management", suite: "Assign_Errors_To_Users", owner: "Kaivalya" },
            { category: "flow-management", suite: "EM2.0", owner: "Akhil" },
            { category: "flow-management", suite: "Assign_Errors_To_Users_2", owner: "Kaivalya" },
            { category: "flow-management", suite: "FlowStepDebugLogs", owner: "Geethika" },
            { category: "flow-management", suite: "SPLUNK_3", owner: "Geethika" },
            { category: "flow-management", suite: "ACCESSDATA", owner: "Prerana" },
            { category: "http-adaptor", suite: "Async_Helper", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP_Azure", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "JWTSchemavalidations", owner: "Shafeek" },
            { category: "http-adaptor", suite: "HTTP_OAuth_1.0", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP4", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "HTTP_Connection", owner: "Shafeek" },
            { category: "http-adaptor", suite: "Jwt_Standalone", owner: "Shafeek" },
            { category: "http-adaptor", suite: "HTTP_URL_Download", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "HTTP_Adaptor_Global_iClient_support", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "GDRIVE2", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "HTTP3", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "AmazonSP", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "HTTP2", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "HTTP_AXIOS_NEGATIVE", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "HTTP_AMAZON_PAY", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP_OAuth2.0_Redesign", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "SupportContent_BE", owner: "Shafeek" },
            { category: "http-adaptor", suite: "HTTP_Async_Helper", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP_MS", owner: "Shafeek" },
            { category: "http-adaptor", suite: "HTTP_fileSize", owner: "Shafeek" },
            { category: "http-adaptor", suite: "HTTP_Blob_Export", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "RestImport", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP_Blob_Import", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP5", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP6", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "HTTP7", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "END_TO_END_FLOWS", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "LINEARCOMPLEX_E2E_FLOWS", owner: "Sujatha Kutcharlapati" },
            { category: "http-adaptor", suite: "CONNECTIONS", owner: "Shafeek" },
            { category: "http-adaptor", suite: "FileAdaptor_GeneralServices", owner: "Shafeek" },
            { category: "http-adaptor", suite: "STANDALONE", owner: "Shafeek" },
            { category: "http-adaptor", suite: "HUGE_RECORDS", owner: "Nishitha Maddati" },
            { category: "http-adaptor", suite: "SPLUNK_3", owner: "Sujatha Kutcharlapati" },
            { category: "jdbc-bridge", suite: "NSAW_BULKLOAD", owner: "Bhanu" },
            { category: "jdbc-bridge", suite: "ActiveDirectory", owner: "Bhanu" },
            { category: "jdbc-bridge", suite: "OracleADW", owner: "Bhanu" },
            { category: "jdbc-bridge", suite: "NetSuite_JDBC", owner: "Bhanu" },
            { category: "jdbc-bridge", suite: "Databricks", owner: "Bhanu" },
            { category: "jdbc-bridge", suite: "WORKDAY", owner: "Bhanu" },
            { category: "js-runtime", suite: "Scripts", owner: "Sowmya" },
            { category: "js-runtime", suite: "JSRT_Invoke_route_Suite1", owner: "Sowmya" },
            { category: "js-runtime", suite: "JSRT_Invoke_route_Suite2", owner: "Sowmya" },
            { category: "js-runtime", suite: "JSRT_MyApi_Flows_Run", owner: "Sowmya" },
            { category: "js-runtime", suite: "LINEARCOMPLEX_E2E_FLOWS", owner: "Sowmya" },
            { category: "js-runtime", suite: "STANDALONE", owner: "Sowmya" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite3", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NS_SS2_Suite1", owner: "Nithin" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite4", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite5", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NETSUITEONCE", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NETSUITE_DISTRIBUTED", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite_FlowDebugger_Lookups", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NS_SS2_Suite4", owner: "Nithin" },
            { category: "netsuite-distributed-adaptor", suite: "NS_SS2_Suite3", owner: "Nithin" },
            { category: "netsuite-distributed-adaptor", suite: "Netsuite_RestwebServices", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NS_SS2_Suite2", owner: "Nithin" },
            { category: "netsuite-distributed-adaptor", suite: "NS_SS2_Suite5", owner: "Nithin" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite_FlowDebugger", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "SuiteApp", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NETSUITE_DISTRIBUTED1", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "SuiteApp2", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NetSuite2", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "NS_SS2_Suite6", owner: "Nithin" },
            { category: "netsuite-distributed-adaptor", suite: "STANDALONE", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "SPLUNK_3", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "END_TO_END_FLOWS", owner: "Anitha" },
            { category: "netsuite-distributed-adaptor", suite: "CONNECTIONS", owner: "Anitha" },
            { category: "netsuite-webservices-adaptor", suite: "NetSuite_FileProviders", owner: "Swathi" },
            { category: "netsuite-webservices-adaptor", suite: "NetSuite_FileProviders2", owner: "Swathi" },
            { category: "netsuite-webservices-adaptor", suite: "NETSUITE_WEBSERVICES", owner: "Anitha" },
            { category: "netsuite-webservices-adaptor", suite: "STANDALONE", owner: "Anitha" },
            { category: "nosql-db-adaptor", suite: "MongoDB", owner: "Bhanu" },
            { category: "nosql-db-adaptor", suite: "DynamoDB", owner: "Bhanu" },
            { category: "performance", suite: "SF_BULK_LOAD", owner: "Sathwika" },
            { category: "rdbms-adaptor", suite: "PostgreSQL", owner: "Bhanu" },
            { category: "rdbms-adaptor", suite: "MariaDB", owner: "Bhanu" },
            { category: "rdbms-adaptor", suite: "AzureSynapse", owner: "Bhanu" },
            { category: "rdbms-adaptor", suite: "MsSQL", owner: "Bhanu" },
            { category: "rdbms-adaptor", suite: "MySql", owner: "Bhanu" },
            { category: "rdbms-adaptor", suite: "ON_PREM", owner: "Bhanu" },
            { category: "rdbms-adaptor", suite: "ON_PREM_DB", owner: "Bhanu" },
            { category: "resource-management", suite: "Licenses", owner: "Suman" },
            { category: "resource-management", suite: "FlowGrouping", owner: "Geethika" },
            { category: "resource-management", suite: "InviteUser", owner: "Gautham" },
            { category: "resource-management", suite: "Transfer_OwnerShip", owner: "Geethika" },
            { category: "resource-management", suite: "IOAccount_NO_SBAccess", owner: "Geethika" },
            { category: "resource-management", suite: "VAN_Connector", owner: "Naveen" },
            { category: "resource-management", suite: "Transfer_Ownership_Email", owner: "Akhil" },
            { category: "resource-management", suite: "Change_In_No_Of_Endpoints", owner: "Gaurav" },
            { category: "resource-management", suite: "API_Management", owner: "Gaurav" },
            { category: "resource-management", suite: "Server", owner: "Suman" },
            { category: "resource-management", suite: "API_Builder", owner: "Gaurav" },
            { category: "resource-management", suite: "APIM_MULTI_ENV_TEST", owner: "Gaurav" },
            { category: "resource-management", suite: "CAM_IA", owner: "Naveen" },
            { category: "resource-management", suite: "licenses_DisableOverage", owner: "Prerana" },
            { category: "resource-management", suite: "Selective_Fetching", owner: "Naveen" },
            { category: "resource-management", suite: "Platform_To_Endpoint_License_Conversion", owner: "Kaivalya" },
            { category: "resource-management", suite: "APIMADMIN", owner: "Gaurav" },
            { category: "resource-management", suite: "Usability", owner: "Gautham" },
            { category: "resource-management", suite: "OpenApiSpec", owner: "Prerana" },
            { category: "resource-management", suite: "ResourcePagination2", owner: "Gautham" },
            { category: "resource-management", suite: "SSO_Clients", owner: "Prerana" },
            { category: "resource-management", suite: "EndpointLicensing", owner: "Suman" },
            { category: "resource-management", suite: "Stacks", owner: "Akhil" },
            { category: "resource-management", suite: "ResourcePagination", owner: "Gautham" },
            { category: "resource-management", suite: "Allow_Users_To_Download_All_Logs", owner: "Deepak" },
            { category: "resource-management", suite: "Cloning", owner: "Gaurav" },
            { category: "resource-management", suite: "Templates", owner: "Geethika" },
            { category: "resource-management", suite: "FEATURED_TEMPLATES", owner: "Prerana" },
            { category: "resource-management", suite: "PlatformLicenses", owner: "Suman" },
            { category: "resource-management", suite: "RMS_Bugs", owner: "Gautham" },
            { category: "resource-management", suite: "GOVERNANCE", owner: "Kaivalya" },
            { category: "resource-management", suite: "MULTIENVIRONMENT_1", owner: "Kaivalya" },
            { category: "resource-management", suite: "MULTIENVIRONMENT_3", owner: "Kaivalya" },
            { category: "resource-management-PFExtension", suite: "IAF2.0", owner: "Swathi" },
            { category: "resource-management-PFExtension", suite: "HTTP2.0", owner: "Shafeek" },
            { category: "resource-management-PFExtension", suite: "IAF2.0_1", owner: "Khaisar" },
            { category: "resource-management-PFExtension", suite: "PKCE_BE", owner: "Shafeek" },
            { category: "resource-management-PFExtension", suite: "UI2API_IAF", owner: "Khaisar" },
            { category: "resource-management-PFExtension", suite: "IAF2.0_2", owner: "Swathi" },
            { category: "resource-management-PFExtension", suite: "IAF2.0_3", owner: "Swathi" },
            { category: "resource-management-Platform", suite: "ILM_MULTIENV", owner: "Sathwika" },
            { category: "resource-management-Platform", suite: "ResourceAliases", owner: "Anitha" },
            { category: "resource-management-Platform", suite: "ILM", owner: "Anitha" },
            { category: "salesforce-adaptor", suite: "SF_BULKAPI2", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "Salesforce_MS_Regression3", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "SF_MS", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "Salesforce", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "Salesforce_MS_Regression", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "Salesforce_MS_Regression2", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "SF_BULKAPI", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "SF_BULKAPI5", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "SF_bulk", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "SF_BULKAPI3", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "Salesforce_MS_Regression1", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "STANDALONE_SF", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "SF_BULKAPI4", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "STANDALONE", owner: "Sathwika" },
            { category: "salesforce-adaptor", suite: "Connections", owner: "Sathwika" },
            { category: "webhooks", suite: "webhook1", owner: "Gautham" },
            { category: "webhooks", suite: "Webhook", owner: "Gautham" },
            { category: "webhooks", suite: "webhook2", owner: "Gautham" },
            { category: "webhooks", suite: "HUGE_RECORDS", owner: "Gautham" },
            { category: "webhooks", suite: "STANDALONE", owner: "Gautham" },
            { category: "worker", suite: "Flowbranching_router", owner: "Kaivalya" },
            { category: "worker", suite: "FlowBranching_E2E_Flows", owner: "Kaivalya" },
            { category: "worker", suite: "FlowBranching_Stability_Test_Cases", owner: "Kaivalya" },
            { category: "worker", suite: "Flowbranching_router2", owner: "Kaivalya" },
            { category: "lookup-cache", suite: "lookupcache1", owner: "Malla" },
            { category: "lookup-cache", suite: "lookupcache2", owner: "Malla" },
            { category: "lookup-cache", suite: "lookupcache_ilm", owner: "Malla" },
            { category: "lookup-cache", suite: "lookupcache_multienv", owner: "Malla" },
            { category: "lookup-cache", suite: "LOOKUPCACHE", owner: "Malla" },
            { category: "lookup-cache", suite: "LOOKUPCACHE_1GB", owner: "Malla" },
            { category: "FTP-BRIDGE-MS", suite: "FTP3", owner: "Shafeek" },
            { category: "FTP-BRIDGE-MS", suite: "FTP2", owner: "Shafeek" },
            { category: "FTP-BRIDGE-MS", suite: "FTP", owner: "Shafeek" },
            { category: "Resource-management", suite: "email_rms", owner: "Gautham" }
        ];
        // UI Suite Owner Mapping from CSV data
        const UI_OWNER_SUITE_MAPPING = [
            // Aurora Team
            { team: "Aurora", suite: "MFA", owner: "Manish" },
            { team: "Aurora", suite: "FLOWGROUPING_IAF", owner: "Manish" },
            { team: "Aurora", suite: "email_suite", owner: "Manish" },
            { team: "Aurora", suite: "EMAIL_NOTIFICATION", owner: "Manish" },
            { team: "Aurora", suite: "email_validation", owner: "Manish" },
            { team: "Aurora", suite: "ftp_standalone_suite", owner: "Manish" },
            { team: "Aurora", suite: "ILM_INTEGRATION2", owner: "Manish" },
            { team: "Aurora", suite: "APIMMULTIENV", owner: "Manish" },
            { team: "Aurora", suite: "DI", owner: "Manish" },
            // Chloris Team
            { team: "Chloris", suite: "MFA2", owner: "Revathi" },
            { team: "Chloris", suite: "integration_apps", owner: "Revathi" },
            { team: "Chloris", suite: "account_switching", owner: "Revathi" },
            { team: "Chloris", suite: "MFA_ADMIN", owner: "Revathi" },
            { team: "Chloris", suite: "create_flows2", owner: "Revathi" },
            { team: "Chloris", suite: "MAY_PHOENIX", owner: "Revathi" },
            { team: "Chloris", suite: "afe", owner: "Revathi" },
            { team: "Chloris", suite: "phoenix_phase0", owner: "Revathi" },
            { team: "Chloris", suite: "api_builder", owner: "Revathi" },
            { team: "Chloris", suite: "Api_Suite1", owner: "Revathi" },
            { team: "Chloris", suite: "custom_suite", owner: "Revathi" },
            { team: "Chloris", suite: "APIM", owner: "Revathi" },
            { team: "Chloris", suite: "REST_HTTP", owner: "Revathi" },
            { team: "Chloris", suite: "simple_view", owner: "Revathi" },
            { team: "Chloris", suite: "Manage_few_suite", owner: "Revathi" },
            // Helios Team
            { team: "Helios", suite: "admin_suite", owner: "Shriti" },
            { team: "Helios", suite: "manage_suite", owner: "Shriti" },
            { team: "Helios", suite: "Databases", owner: "Shriti" },
            { team: "Helios", suite: "ILM_INTEGRATION", owner: "Shriti" },
            { team: "Helios", suite: "FlowDebugger", owner: "Shriti" },
            { team: "Helios", suite: "NSTHIRDPARTY", owner: "Shriti" },
            { team: "Helios", suite: "user_notify", owner: "Phani" },
            { team: "Helios", suite: "assignErrors", owner: "Phani" },
            { team: "Helios", suite: "monitor_suite", owner: "Phani" },
            { team: "Helios", suite: "create_flows_suite1_user", owner: "Phani" },
            { team: "Helios", suite: "general", owner: "Phani" },
            { team: "Helios", suite: "uiux_suite03", owner: "Phani" },
            { team: "Helios", suite: "connections", owner: "Phani" },
            { team: "Helios", suite: "edi_suite", owner: "Phani" },
            { team: "Helios", suite: "flowbranching01", owner: "Phani" },
            { team: "Helios", suite: "edit_flows", owner: "Phani" },
            // Eirene Team
            { team: "Eirene", suite: "FlowBuilder04", owner: "Mahesh" },
            { team: "Eirene", suite: "uiux_suite02", owner: "Mahesh" },
            { team: "Eirene", suite: "httpConnector2.0", owner: "Mahesh" },
            { team: "Eirene", suite: "standalone1", owner: "Mahesh" },
            { team: "Eirene", suite: "standalone7", owner: "Mahesh" },
            { team: "Eirene", suite: "FlowBuilder", owner: "Mahesh" },
            { team: "Eirene", suite: "standalone6", owner: "Mahesh" },
            // Hercules Team
            { team: "Hercules", suite: "e2e_flows", owner: "Subarna" },
            { team: "Hercules", suite: "NETSUITE_SS2.0", owner: "Mahesh" },
            { team: "Hercules", suite: "CeligoAI", owner: "Subarna" },
            { team: "Hercules", suite: "mapper2.0", owner: "Subarna" },
            { team: "Hercules", suite: "standalone5", owner: "Subarna" },
            { team: "Hercules", suite: "mapper2.0_2", owner: "Subarna" },
            { team: "Hercules", suite: "em2_2", owner: "Phani" },
            { team: "Hercules", suite: "Template", owner: "Shriti" },
            { team: "Hercules", suite: "em2", owner: "Shriti" },
            { team: "Hercules", suite: "standalone4", owner: "Shriti" },
            { team: "Hercules", suite: "FlowEventReport", owner: "Vikram" },
            { team: "Hercules", suite: "userManagement", owner: "Subarna" },
            // Iris Team
            { team: "Iris", suite: "transferSBflow", owner: "Vikram" },
            { team: "Iris", suite: "HTTP2DOT0", owner: "Vikram" },
            { team: "Iris", suite: "signoutPage", owner: "Vikram" },
            { team: "Iris", suite: "pricing_model_suite", owner: "Vikram" },
            { team: "Iris", suite: "uiux_suite01", owner: "Vikram" },
            { team: "Iris", suite: "onprem", owner: "Vikram" },
            { team: "Iris", suite: "transfer", owner: "Vikram" },
            { team: "Iris", suite: "flowbranching", owner: "Vikram" },
            { team: "Iris", suite: "edit_flows_2", owner: "Vikram" },
            // Phoenix Team
            { team: "Phoenix", suite: "account", owner: "Sagna" },
            { team: "Phoenix", suite: "signinpage", owner: "Sagna" },
            { team: "Phoenix", suite: "js-runtime", owner: "Sagna" },
            { team: "Phoenix", suite: "edit_connections", owner: "Sagna" },
            { team: "Phoenix", suite: "new UI", owner: "Sagna" },
            { team: "Phoenix", suite: "flowbuilder01", owner: "Sagna" },
            { team: "Phoenix", suite: "flowbuilder02", owner: "Sagna" },
            { team: "Phoenix", suite: "flowbuilder03", owner: "Sagna" },
            { team: "Phoenix", suite: "standalone2", owner: "Sagna" },
            { team: "Phoenix", suite: "standalone3", owner: "Sagna" },
            { team: "Phoenix", suite: "support_access", owner: "Sagna" },
            { team: "Phoenix", suite: "Multipleenvs", owner: "Sagna" },
            { team: "Phoenix", suite: "Multipleenvsinvited", owner: "Sagna" },
        ];

        // UI Owners Tab Variables
        let uiOwnerTabInitialized = false;
        let selectedUiOwnerSuites = [];
        let uiOwnerSuiteResults = [];

        let ownerTabInitialized = false;
        let selectedOwnerSuites = [];
        let ownerSuiteResults = [];

        // Initialize Owner tab when first shown
        function initOwnerTab() {
            if (ownerTabInitialized) return;
            ownerTabInitialized = true;

            // Get unique owners and sort them
            const owners = [...new Set(OWNER_SUITE_MAPPING.map(m => m.owner).filter(o => o && o.trim()))].sort();
            
            // Helper function to count unique suites (case-insensitive) for an owner
            function getUniqueSuiteCount(owner) {
                const ownerSuites = OWNER_SUITE_MAPPING.filter(m => m.owner === owner);
                const uniqueNames = new Set(ownerSuites.map(m => m.suite.toLowerCase()));
                return uniqueNames.size;
            }
            
            const ownerSelect = document.getElementById('ownerSelect');
            ownerSelect.innerHTML = '<option value="">-- Select an API Owner --</option>' +
                owners.map(owner => {
                    const count = getUniqueSuiteCount(owner);
                    return `<option value="${owner}">${owner} (${count} suites)</option>`;
                }).join('');

            // Setup event listeners
            const fetchBtn = document.getElementById('fetchOwnerSuitesBtn');
            const dateFilter = document.getElementById('ownerDateFilter');
            const clearDateBtn = document.getElementById('clearOwnerDateFilter');
            const backBtn = document.getElementById('backToOwnerSuites');
            const envSelect = document.getElementById('ownerEnvSelect');

            ownerSelect.addEventListener('change', () => {
                fetchBtn.disabled = !ownerSelect.value;
                if (ownerSelect.value) {
                    fetchOwnerSuites();
                }
            });

            fetchBtn.addEventListener('click', fetchOwnerSuites);

            dateFilter.addEventListener('change', () => {
                if (ownerSelect.value) {
                    fetchOwnerSuites();
                }
            });

            clearDateBtn.addEventListener('click', () => {
                dateFilter.value = '';
                if (ownerSelect.value) {
                    fetchOwnerSuites();
                }
            });

            backBtn.addEventListener('click', () => {
                document.getElementById('ownerSuiteDetailCard').classList.add('hidden');
                document.getElementById('ownerSuitesContainer').classList.remove('hidden');
            });

            envSelect.addEventListener('change', () => {
                if (ownerSelect.value) {
                    fetchOwnerSuites();
                }
            });
        }

        async function fetchOwnerSuites() {
            const ownerSelect = document.getElementById('ownerSelect');
            const dateFilter = document.getElementById('ownerDateFilter').value;
            const envSelect = document.getElementById('ownerEnvSelect');
            const selectedOwner = ownerSelect.value;
            const selectedEnv = envSelect.value; // 'staging', 'qa', 'iaqa'

            if (!selectedOwner) return;

            // Show loading state
            document.getElementById('ownerEmptyState').classList.add('hidden');
            document.getElementById('ownerSuitesContainer').classList.add('hidden');
            document.getElementById('ownerSuiteDetailCard').classList.add('hidden');
            document.getElementById('ownerLoadingState').classList.remove('hidden');

            // Get suites for this owner from the CSV mapping
            // Deduplicate by suite name (case-insensitive) - keep the first occurrence if same suite appears in multiple categories
            const ownerSuitesRaw = OWNER_SUITE_MAPPING.filter(m => m.owner === selectedOwner);
            const seenSuiteNames = new Set();
            selectedOwnerSuites = ownerSuitesRaw.filter(m => {
                const normalizedName = m.suite.toLowerCase();
                if (seenSuiteNames.has(normalizedName)) {
                    return false; // Skip duplicate suite name (case-insensitive)
                }
                seenSuiteNames.add(normalizedName);
                return true;
            });
            
            console.log(`Fetching REST API reports for owner: ${selectedOwner}, env: ${selectedEnv}, date: ${dateFilter || 'any'}`);
            console.log(`Found ${selectedOwnerSuites.length} suites for owner`);

            try {
                // Fetch report folders for each suite from REST API Reports portal
                const results = [];
                const batchSize = 15; // Increased from 5 for faster parallel processing

                // Get all unique main folders (categories) for searching COMMON_SUITES
                const allMainFolders = [...new Set(OWNER_SUITE_MAPPING.map(m => m.category))];
                
                // Suites that need to search across all folders (not just their listed category)
                const SEARCH_ALL_FOLDERS_SUITES = [
                    'Phase_0_SampleIntegration_Install',  // Listed in authentication-service but exists in resource-management
                ];
                
                // OPTIMIZATION: Cache for folder listings to avoid duplicate fetches
                const folderCache = new Map();
                const dateFolderCache = new Map();
                
                // Helper function to fetch and cache env folder listing
                async function getCachedEnvFolder(category) {
                    const basePath = `/${category}/${selectedEnv}`;
                    const cacheKey = basePath;
                    
                    if (folderCache.has(cacheKey)) {
                        return folderCache.get(cacheKey);
                    }
                    
                    try {
                        const response = await fetch(`${REST_REPORTS_CONFIG.baseUrl}/?path=/var/www/html${basePath}`);
                        if (!response.ok) {
                            folderCache.set(cacheKey, null);
                            return null;
                        }
                        const html = await response.text();
                        const dateFolders = parseDateFolders(html, basePath, dateFilter);
                        folderCache.set(cacheKey, { basePath, dateFolders });
                        return { basePath, dateFolders };
                    } catch (e) {
                        folderCache.set(cacheKey, null);
                        return null;
                    }
                }
                
                // Helper function to fetch and cache date folder contents
                async function getCachedDateFolder(folderPath) {
                    if (dateFolderCache.has(folderPath)) {
                        return dateFolderCache.get(folderPath);
                    }
                    
                    try {
                        const response = await fetch(`${REST_REPORTS_CONFIG.baseUrl}/?path=/var/www/html${folderPath}`);
                        if (!response.ok) {
                            dateFolderCache.set(folderPath, null);
                            return null;
                        }
                        const html = await response.text();
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        const rows = doc.querySelectorAll('table tr');
                        const suites = [];
                        rows.forEach(row => {
                            const cells = row.querySelectorAll('td');
                            if (cells.length >= 2) {
                                const nameCell = cells[1]?.textContent?.trim();
                                if (nameCell && !nameCell.includes('Back to Parent')) {
                                    suites.push(nameCell);
                                }
                            }
                        });
                        dateFolderCache.set(folderPath, suites);
                        return suites;
                    } catch (e) {
                        dateFolderCache.set(folderPath, null);
                        return null;
                    }
                }
                
                // OPTIMIZATION: Pre-fetch all unique category folders in parallel
                const uniqueCategories = [...new Set(selectedOwnerSuites.map(s => s.category))];
                const hasSearchAllSuites = selectedOwnerSuites.some(s => 
                    s.category.toUpperCase() === 'COMMON_SUITES' || SEARCH_ALL_FOLDERS_SUITES.includes(s.suite)
                );
                
                // Pre-fetch categories needed
                const categoriesToFetch = hasSearchAllSuites ? allMainFolders : uniqueCategories;
                console.log(`Pre-fetching ${categoriesToFetch.length} category folders...`);
                await Promise.all(categoriesToFetch.map(cat => getCachedEnvFolder(cat)));
                console.log(`Pre-fetch complete. Processing ${selectedOwnerSuites.length} suites...`);
                
                // Process all suites in parallel batches
                for (let i = 0; i < selectedOwnerSuites.length; i += batchSize) {
                    const batch = selectedOwnerSuites.slice(i, i + batchSize);
                    const batchPromises = batch.map(async (suiteInfo) => {
                        try {
                            // For COMMON_SUITES or special suites, search across all main folders
                            const isCommonSuite = suiteInfo.category.toUpperCase() === 'COMMON_SUITES';
                            const isSearchAllSuite = SEARCH_ALL_FOLDERS_SUITES.includes(suiteInfo.suite);
                            const shouldSearchAll = isCommonSuite || isSearchAllSuite;
                            const foldersToSearch = shouldSearchAll ? allMainFolders : [suiteInfo.category];
                            
                            const validReportFolders = [];
                            let foundInCategory = null;
                            
                            for (const searchCategory of foldersToSearch) {
                                const envData = await getCachedEnvFolder(searchCategory);
                                if (!envData) continue;
                                
                                const { basePath, dateFolders } = envData;
                                
                                // OPTIMIZATION: Only check latest 2 date folders instead of 5
                                for (const folder of dateFolders.slice(0, 2)) {
                                    const suites = await getCachedDateFolder(folder.path);
                                    if (!suites) continue;
                                    
                                    // Find matching suite (case-insensitive)
                                    const matchingSuite = suites.find(s => 
                                        s.toLowerCase() === suiteInfo.suite.toLowerCase()
                                    );
                                    
                                    if (matchingSuite) {
                                        validReportFolders.push({
                                            ...folder,
                                            suitePath: `${folder.path}/${matchingSuite}`,
                                            foundCategory: searchCategory
                                        });
                                        foundInCategory = searchCategory;
                                    }
                                }
                                
                                // If we found reports for search-all suite, stop searching
                                if (shouldSearchAll && validReportFolders.length > 0) {
                                    break;
                                }
                            }
                            
                            return {
                                ...suiteInfo,
                                basePath: foundInCategory ? `/${foundInCategory}/${selectedEnv}` : `/${suiteInfo.category}/${selectedEnv}`,
                                actualCategory: foundInCategory || suiteInfo.category,
                                reportFolders: validReportFolders,
                                latestReport: validReportFolders.length > 0 ? validReportFolders[0] : null
                            };
                        } catch (e) {
                            console.error(`Error fetching suite ${suiteInfo.suite}:`, e);
                            return {
                                ...suiteInfo,
                                basePath: `/${suiteInfo.category}/${selectedEnv}`,
                                actualCategory: suiteInfo.category,
                                reportFolders: [],
                                latestReport: null
                            };
                        }
                    });

                    const batchResults = await Promise.all(batchPromises);
                    results.push(...batchResults);
                }

                ownerSuiteResults = results;
                renderOwnerSuitesREST(results, selectedOwner, dateFilter, selectedEnv);

            } catch (e) {
                console.error('Error fetching owner suites:', e);
                document.getElementById('ownerLoadingState').classList.add('hidden');
                document.getElementById('ownerEmptyState').classList.remove('hidden');
            }
        }

        // Parse REST API Reports directory listing to find date folders
        function parseDateFolders(html, basePath, dateFilter) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const rows = doc.querySelectorAll('table tr');
            const folders = [];

            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 3) {
                    const typeCell = cells[0].textContent.trim();
                    const nameCell = cells[1].textContent.trim();
                    const linkCell = cells[2].querySelector('a');

                    if (nameCell && linkCell && typeCell.includes('Directory') && !nameCell.includes('Back to Parent')) {
                        // Folder names are like: Dec_08_2025_22_43_authentication-service_2613
                        const folderName = nameCell;
                        
                        // Extract date from folder name (format: Mon_DD_YYYY)
                        const dateMatch = folderName.match(/([A-Za-z]{3})_(\d{2})_(\d{4})/);
                        let folderDate = null;
                        if (dateMatch) {
                            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                            const monthIndex = monthNames.indexOf(dateMatch[1]);
                            if (monthIndex !== -1) {
                                folderDate = `${dateMatch[3]}-${String(monthIndex + 1).padStart(2, '0')}-${dateMatch[2]}`;
                            }
                        }

                        // If date filter is set, only include matching folders
                        if (dateFilter && folderDate !== dateFilter) {
                            return;
                        }

                        folders.push({
                            name: folderName,
                            path: `${basePath}/${folderName}`,
                            date: folderDate,
                            displayDate: dateMatch ? `${dateMatch[1]} ${dateMatch[2]}, ${dateMatch[3]}` : null
                        });
                    }
                }
            });

            // Sort by date (newest first) - also by folder name to get latest run
            folders.sort((a, b) => {
                if (!a.date || !b.date) return 0;
                // First sort by date, then by folder name (which includes time)
                const dateCompare = b.date.localeCompare(a.date);
                if (dateCompare !== 0) return dateCompare;
                return b.name.localeCompare(a.name);
            });

            return folders;
        }

        function generatePossibleSuiteNames(suiteInfo) {
            const { category, suite } = suiteInfo;
            // ReportPortal uses format: "CATEGORY SUITENAME AUTOMATION TESTS STAGING"
            // e.g., "EDI-SUITES EDI2 AUTOMATION TESTS STAGING"
            // Underscores in CSV suite names become spaces in ReportPortal
            // Categories keep their hyphens
            
            const catUpper = category.toUpperCase();
            // Replace underscores with spaces and uppercase
            const suiteNoUnderscores = suite.replace(/_/g, ' ').toUpperCase();
            // Keep dots in version numbers like "2.0"
            const suiteFormatted = suiteNoUnderscores;
            
            const names = [
                // Primary pattern: CATEGORY SUITE AUTOMATION TESTS STAGING
                `${catUpper} ${suiteFormatted} AUTOMATION TESTS STAGING`,
                // With original case
                `${catUpper} ${suite.replace(/_/g, ' ')} AUTOMATION TESTS STAGING`,
                // Try with underscores kept
                `${catUpper} ${suite.toUpperCase()} AUTOMATION TESTS STAGING`,
                // Without category
                `${suiteFormatted} AUTOMATION TESTS STAGING`,
                // Alternative category formats
                `${catUpper.replace(/-/g, ' ')} ${suiteFormatted} AUTOMATION TESTS STAGING`,
                // Exact matches
                suite,
                suite.toUpperCase(),
                suite.replace(/_/g, ' '),
                suite.replace(/_/g, ' ').toUpperCase()
            ];
            
            console.log(`Trying suite names for ${category}/${suite}:`, names.slice(0, 3));
            return names;
        }

        function renderOwnerSuitesREST(results, ownerName, dateFilter, selectedEnv) {
            document.getElementById('ownerLoadingState').classList.add('hidden');
            document.getElementById('ownerSuitesContainer').classList.remove('hidden');

            // Update header
            document.getElementById('selectedOwnerName').textContent = ownerName;
            
            // Calculate stats
            const suitesWithReports = results.filter(r => r.latestReport);
            
            document.getElementById('selectedOwnerStats').textContent = 
                dateFilter 
                    ? `${suitesWithReports.length} suites with reports on ${formatDateDisplay(dateFilter)}`
                    : `${results.length} assigned suites ‚Ä¢ ${suitesWithReports.length} with reports`;

            document.getElementById('ownerPassedCount').textContent = suitesWithReports.length;
            document.getElementById('ownerFailedCount').textContent = results.length - suitesWithReports.length;
            document.getElementById('ownerTotalCount').textContent = results.length;

            // Render grid
            const grid = document.getElementById('ownerSuitesGrid');
            
            if (results.length === 0) {
                grid.innerHTML = `
                    <div class="no-owner-suites" style="grid-column: 1 / -1;">
                        <div class="no-owner-suites-icon">üì≠</div>
                        <h4>No Suites Found</h4>
                        <p>No test suites are assigned to this owner.</p>
                    </div>
                `;
                return;
            }

            // Sort: suites with reports first, then by category
            const sortedResults = [...results].sort((a, b) => {
                if (!a.latestReport && !b.latestReport) return a.category.localeCompare(b.category);
                if (!a.latestReport) return 1;
                if (!b.latestReport) return -1;
                return 0;
            });
            
            // Store sorted results for click handling
            window.sortedOwnerResults = sortedResults;
            
            grid.innerHTML = sortedResults.map((result, index) => {
                const hasReport = result.latestReport !== null;
                const status = hasReport ? 'has-report' : 'no-runs';
                const reportCount = result.reportFolders?.length || 0;
                const isCommonSuite = result.category.toUpperCase() === 'COMMON_SUITES';
                const SEARCH_ALL_FOLDERS_SUITES = ['Phase_0_SampleIntegration_Install'];
                const isSearchAllSuite = SEARCH_ALL_FOLDERS_SUITES.includes(result.suite);
                const shouldSearchAll = isCommonSuite || isSearchAllSuite;
                const actualCategory = result.actualCategory || result.category;
                const foundInDifferentFolder = shouldSearchAll && hasReport && actualCategory !== result.category;
                
                return `
                    <div class="owner-suite-card ${status}" 
                         data-index="${index}"
                         data-has-report="${hasReport}">
                        <div class="owner-suite-card-header">
                            <div class="owner-suite-name">
                                <span class="suite-category">${result.category}</span>
                                <span>${result.suite}</span>
                            </div>
                            <div class="owner-suite-status ${hasReport ? 'passed' : 'no-runs'}">
                                ${hasReport ? `${reportCount} Report${reportCount > 1 ? 's' : ''}` : 'No Reports'}
                            </div>
                        </div>
                        ${hasReport ? `
                            <div class="owner-suite-stats">
                                <span style="color: var(--accent-cyan)">üìÖ ${result.latestReport.displayDate || 'Recent'}</span>
                                ${foundInDifferentFolder ? `<span style="color: var(--accent-purple)">üìÅ Found in: ${actualCategory}</span>` : ''}
                            </div>
                            <div class="owner-suite-meta">
                                <span>üìÇ ${selectedEnv}</span>
                                <span>üîó Click to view</span>
                                <a href="https://portal_user:celigo%40123@reporting-portal.qa.staging.integrator.io${result.latestReport.suitePath}/index.html" 
                                   target="_blank" 
                                   class="direct-report-link"
                                   onclick="event.stopPropagation();"
                                   title="Open Report Directly">üîó</a>
                            </div>
                        ` : `
                            <div class="owner-suite-stats" style="color: var(--text-muted)">
                                ${shouldSearchAll ? 'Searched all folders - No reports found' : `No reports found in ${selectedEnv}`}
                            </div>
                            <div class="owner-suite-meta">
                                <span style="color: var(--text-muted)">üìÇ ${result.basePath}</span>
                            </div>
                        `}
                    </div>
                `;
            }).join('');
            
            // Add click handlers to suite cards
            grid.querySelectorAll('.owner-suite-card').forEach(card => {
                card.addEventListener('click', () => {
                    const index = parseInt(card.dataset.index);
                    const hasReport = card.dataset.hasReport === 'true';
                    const result = window.sortedOwnerResults[index];
                    
                    if (hasReport && result && result.latestReport) {
                        // Open the report in a new tab
                        const reportUrl = `https://portal_user:celigo%40123@reporting-portal.qa.staging.integrator.io${result.latestReport.suitePath}/index.html`;
                        window.open(reportUrl, '_blank');
                    } else if (result) {
                        // Show all report folders for this suite
                        showOwnerSuiteFolders(result);
                    }
                });
            });
        }

        // Show available report folders for a suite
        function showOwnerSuiteFolders(result) {
            const selectedEnv = document.getElementById('ownerEnvSelect').value;
            
            if (result.reportFolders && result.reportFolders.length > 0) {
                // Show list of available reports
                document.getElementById('ownerSuitesContainer').classList.add('hidden');
                
                const detailCard = document.getElementById('ownerSuiteDetailCard');
                detailCard.innerHTML = `
                    <div class="report-header">
                        <button class="back-btn" onclick="backToOwnerSuitesList()">‚Üê Back to API Owners</button>
                        <div class="report-title">${result.category} / ${result.suite}</div>
                    </div>
                    <div style="padding: 1.5rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">üìÅ Available Reports (${result.reportFolders.length})</h4>
                        <div class="reports-grid">
                            ${result.reportFolders.map(folder => `
                                <div class="report-card-mini passed" style="cursor: pointer;" 
                                     onclick="window.open('https://portal_user:celigo%40123@reporting-portal.qa.staging.integrator.io${folder.suitePath}/index.html', '_blank')">
                                    <div class="report-card-mini-header">
                                        <div class="report-card-mini-title">
                                            <span>üìÖ ${folder.displayDate || 'Report'}</span>
                                        </div>
                                    </div>
                                    <div class="report-card-mini-meta">
                                        <span>${folder.name}</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                detailCard.classList.remove('hidden');
            } else {
                // Open the base folder in REST API Reports tab
                alert(`No reports found for ${result.suite} in ${selectedEnv}.\n\nPath: ${result.basePath}`);
            }
        }

        function backToOwnerSuitesList() {
            document.getElementById('ownerSuiteDetailCard').classList.add('hidden');
            document.getElementById('ownerSuitesContainer').classList.remove('hidden');
        }

        // ==================== UI OWNERS TAB ====================
        function initUiOwnerSuitesTab() {
            if (uiOwnerTabInitialized) return;
            uiOwnerTabInitialized = true;

            // Get unique owners and sort them
            const owners = [...new Set(UI_OWNER_SUITE_MAPPING.map(m => m.owner).filter(o => o && o.trim()))].sort();
            
            // Helper function to count unique suites (case-insensitive) for an owner
            function getUniqueUiSuiteCount(owner) {
                const ownerSuites = UI_OWNER_SUITE_MAPPING.filter(m => m.owner === owner);
                const uniqueNames = new Set(ownerSuites.map(m => m.suite.toLowerCase()));
                return uniqueNames.size;
            }
            
            const uiOwnerSelect = document.getElementById('uiOwnerSelect');
            uiOwnerSelect.innerHTML = '<option value="">-- Select a UI Owner --</option>' +
                owners.map(owner => {
                    const count = getUniqueUiSuiteCount(owner);
                    return `<option value="${owner}">${owner} (${count} suites)</option>`;
                }).join('');

            // Setup event listeners
            const fetchBtn = document.getElementById('fetchUiOwnerSuitesBtn');
            const dateFilter = document.getElementById('uiOwnerDateFilter');
            const clearDateBtn = document.getElementById('clearUiOwnerDateFilter');
            const envSelect = document.getElementById('uiOwnerEnvSelect');

            uiOwnerSelect.addEventListener('change', () => {
                fetchBtn.disabled = !uiOwnerSelect.value;
                if (uiOwnerSelect.value) {
                    fetchUiOwnerSuites();
                }
            });

            fetchBtn.addEventListener('click', fetchUiOwnerSuites);

            dateFilter.addEventListener('change', () => {
                if (uiOwnerSelect.value) {
                    fetchUiOwnerSuites();
                }
            });

            clearDateBtn.addEventListener('click', () => {
                dateFilter.value = '';
                if (uiOwnerSelect.value) {
                    fetchUiOwnerSuites();
                }
            });

            envSelect.addEventListener('change', () => {
                if (uiOwnerSelect.value) {
                    fetchUiOwnerSuites();
                }
            });
        }

        async function fetchUiOwnerSuites() {
            const uiOwnerSelect = document.getElementById('uiOwnerSelect');
            const dateFilter = document.getElementById('uiOwnerDateFilter').value;
            const envSelect = document.getElementById('uiOwnerEnvSelect');
            const selectedOwner = uiOwnerSelect.value;
            const selectedEnv = envSelect.value;

            if (!selectedOwner) return;

            // Map environment to project name
            const projectMap = {
                'staging': 'staging_suites',
                'qa': 'qa_suites'
            };
            const projectName = projectMap[selectedEnv] || 'staging_suites';

            // Show loading state
            document.getElementById('uiOwnerEmptyState').classList.add('hidden');
            document.getElementById('uiOwnerSuitesContainer').classList.add('hidden');
            document.getElementById('uiOwnerLoadingState').classList.remove('hidden');

            // Get suites for this owner from the UI mapping (deduplicated)
            const ownerSuitesRaw = UI_OWNER_SUITE_MAPPING.filter(m => m.owner === selectedOwner);
            const seenSuiteNames = new Set();
            selectedUiOwnerSuites = ownerSuitesRaw.filter(m => {
                const normalizedName = m.suite.toLowerCase();
                if (seenSuiteNames.has(normalizedName)) {
                    return false;
                }
                seenSuiteNames.add(normalizedName);
                return true;
            });
            
            console.log(`Fetching UI reports for owner: ${selectedOwner}, env: ${selectedEnv}, date: ${dateFilter || 'any'}`);
            console.log(`Found ${selectedUiOwnerSuites.length} suites for UI owner`);

            try {
                // Fetch from ReportPortal for UI suites
                const results = [];
                
                for (const suiteInfo of selectedUiOwnerSuites) {
                    try {
                        // Search for the suite in ReportPortal
                        const searchName = `PLATFORM_UI_AUTOMATION_${suiteInfo.suite}`;
                        
                        // Build API URL with date filter if specified
                        let apiUrl = `/api/v1/${projectName}/launch?filter.eq.name=${encodeURIComponent(searchName)}&page.size=10&page.sort=startTime,desc`;
                        
                        const response = await fetch(apiUrl);
                        
                        if (response.ok) {
                            const data = await response.json();
                            if (data.content && data.content.length > 0) {
                                // Find matching launch based on date filter
                                let matchingLaunch = null;
                                
                                if (dateFilter) {
                                    // Find launch matching the date (handle timezone properly)
                                    for (const launch of data.content) {
                                        const launchTime = new Date(launch.startTime);
                                        // Format to YYYY-MM-DD in local timezone
                                        const year = launchTime.getFullYear();
                                        const month = String(launchTime.getMonth() + 1).padStart(2, '0');
                                        const day = String(launchTime.getDate()).padStart(2, '0');
                                        const launchDate = `${year}-${month}-${day}`;
                                        if (launchDate === dateFilter) {
                                            matchingLaunch = launch;
                                            break;
                                        }
                                    }
                                } else {
                                    // Use latest launch
                                    matchingLaunch = data.content[0];
                                }
                                
                                if (matchingLaunch) {
                                    results.push({
                                        team: suiteInfo.team,
                                        suite: suiteInfo.suite,
                                        owner: suiteInfo.owner,
                                        latestReport: {
                                            id: matchingLaunch.id,
                                            name: matchingLaunch.name,
                                            status: matchingLaunch.status,
                                            startTime: matchingLaunch.startTime,
                                            statistics: matchingLaunch.statistics,
                                            displayDate: new Date(matchingLaunch.startTime).toLocaleDateString('en-US', { 
                                                month: 'short', day: '2-digit', year: 'numeric' 
                                            })
                                        }
                                    });
                                } else {
                                    results.push({
                                        team: suiteInfo.team,
                                        suite: suiteInfo.suite,
                                        owner: suiteInfo.owner,
                                        latestReport: null
                                    });
                                }
                            } else {
                                results.push({
                                    team: suiteInfo.team,
                                    suite: suiteInfo.suite,
                                    owner: suiteInfo.owner,
                                    latestReport: null
                                });
                            }
                        } else {
                            results.push({
                                team: suiteInfo.team,
                                suite: suiteInfo.suite,
                                owner: suiteInfo.owner,
                                latestReport: null
                            });
                        }
                    } catch (e) {
                        results.push({
                            team: suiteInfo.team,
                            suite: suiteInfo.suite,
                            owner: suiteInfo.owner,
                            latestReport: null
                        });
                    }
                }

                uiOwnerSuiteResults = results;
                renderUiOwnerSuites(results, selectedOwner, dateFilter);

            } catch (e) {
                console.error('Error fetching UI owner suites:', e);
                document.getElementById('uiOwnerLoadingState').classList.add('hidden');
                document.getElementById('uiOwnerEmptyState').classList.remove('hidden');
            }
        }

        function renderUiOwnerSuites(results, ownerName, dateFilter) {
            document.getElementById('uiOwnerLoadingState').classList.add('hidden');
            document.getElementById('uiOwnerSuitesContainer').classList.remove('hidden');

            // Update header
            document.getElementById('selectedUiOwnerName').textContent = ownerName;
            
            // Calculate stats
            const suitesWithReports = results.filter(r => r.latestReport);
            
            document.getElementById('selectedUiOwnerStats').textContent = 
                dateFilter 
                    ? `${suitesWithReports.length} suites with reports on ${dateFilter}`
                    : `${results.length} assigned suites ‚Ä¢ ${suitesWithReports.length} with reports`;

            document.getElementById('uiOwnerPassedCount').textContent = suitesWithReports.length;
            document.getElementById('uiOwnerFailedCount').textContent = results.length - suitesWithReports.length;
            document.getElementById('uiOwnerTotalCount').textContent = results.length;

            // Render grid
            const grid = document.getElementById('uiOwnerSuitesGrid');
            
            if (results.length === 0) {
                grid.innerHTML = `
                    <div class="no-owner-suites" style="grid-column: 1 / -1;">
                        <div class="no-owner-suites-icon">üì≠</div>
                        <h4>No Suites Found</h4>
                        <p>No UI test suites are assigned to this owner.</p>
                    </div>
                `;
                return;
            }

            // Sort: suites with reports first, then by team
            const sortedResults = [...results].sort((a, b) => {
                if (!a.latestReport && !b.latestReport) return a.team.localeCompare(b.team);
                if (!a.latestReport) return 1;
                if (!b.latestReport) return -1;
                return 0;
            });
            
            grid.innerHTML = sortedResults.map((result, index) => {
                const hasReport = result.latestReport !== null;
                const status = hasReport ? 'has-report' : 'no-runs';
                const stats = result.latestReport?.statistics?.executions || {};
                const passed = stats.passed || 0;
                const failed = stats.failed || 0;
                const total = stats.total || 0;
                
                return `
                    <div class="owner-suite-card ${status}" 
                         data-index="${index}"
                         data-has-report="${hasReport}"
                         data-launch-id="${result.latestReport?.id || ''}">
                        <div class="owner-suite-card-header">
                            <div class="owner-suite-name">
                                <span class="suite-category">${result.team}</span>
                                <span>${result.suite}</span>
                            </div>
                            <div class="owner-suite-status ${hasReport ? 'passed' : 'no-runs'}">
                                ${hasReport ? '‚úÖ Has Report' : 'No Reports'}
                            </div>
                        </div>
                        ${hasReport ? `
                            <div class="owner-suite-stats">
                                <span style="color: var(--accent-cyan)">üìÖ ${result.latestReport.displayDate}</span>
                                <span style="color: var(--accent-green)">‚úì ${passed}</span>
                                <span style="color: var(--accent-red)">‚úó ${failed}</span>
                            </div>
                            <div class="owner-suite-meta">
                                <span>Total: ${total}</span>
                                <span>üîó Click to view</span>
                            </div>
                        ` : `
                            <div class="owner-suite-stats" style="color: var(--text-muted)">
                                No reports found in ReportPortal
                            </div>
                            <div class="owner-suite-meta">
                                <span style="color: var(--text-muted)">Suite: PLATFORM_UI_AUTOMATION_${result.suite}</span>
                            </div>
                        `}
                    </div>
                `;
            }).join('');
            
            // Add click handlers to suite cards
            grid.querySelectorAll('.owner-suite-card').forEach(card => {
                card.addEventListener('click', () => {
                    const hasReport = card.dataset.hasReport === 'true';
                    const launchId = card.dataset.launchId;
                    
                    if (hasReport && launchId) {
                        // Open ReportPortal in a new tab
                        const reportUrl = `https://reportportal.qa.staging.integrator.io/ui/#staging_suites/launches/all/${launchId}`;
                        window.open(reportUrl, '_blank');
                    }
                });
            });
        }


        async function showOwnerSuiteDetail(result) {
            if (!result.launch) {
                // No launch data, nothing to show
                return;
            }

            document.getElementById('ownerSuitesContainer').classList.add('hidden');
            document.getElementById('ownerLoadingState').classList.remove('hidden');

            const launch = result.launch;
            const stats = launch.statistics?.executions || {};

            // Update detail card
            document.getElementById('ownerDetailSuiteName').textContent = result.suite;
            document.getElementById('ownerDetailStatus').textContent = launch.status;
            document.getElementById('ownerDetailStatus').className = `status-badge ${launch.status.toLowerCase()}`;
            document.getElementById('ownerDetailTotal').textContent = stats.total || 0;
            document.getElementById('ownerDetailPassed').textContent = stats.passed || 0;
            document.getElementById('ownerDetailFailed').textContent = stats.failed || 0;
            document.getElementById('ownerDetailDuration').textContent = Math.round((launch.approximateDuration || 0) / 60) + 'm';
            document.getElementById('ownerDetailLaunchId').textContent = launch.id;
            document.getElementById('ownerDetailRunNumber').textContent = '#' + launch.number;
            document.getElementById('ownerDetailBuildDate').textContent = launch.attributes?.find(a => a.key === 'Build')?.value || 'N/A';
            document.getElementById('ownerDetailOwner').textContent = launch.owner || result.owner;
            document.getElementById('ownerDetailPlatform').textContent = launch.attributes?.find(a => a.key === 'Platform')?.value || 'N/A';
            
            const selectedEnv = document.getElementById('ownerEnvSelect').value;
            document.getElementById('ownerDetailLink').href = `${CONFIG.RP_DIRECT}/ui/#${selectedEnv}/launches/all/${launch.id}`;

            // Fetch failed tests if any
            if (stats.failed > 0) {
                try {
                    const failedResponse = await fetch(
                        `${CONFIG.RP_HOST}/api/v1/${selectedEnv}/item?filter.eq.launchId=${launch.id}&filter.eq.status=FAILED&page.size=20`
                    );
                    const failedData = await failedResponse.json();
                    const failedTests = failedData.content.filter(i => i.type === 'STEP');

                    document.getElementById('ownerDetailFailedList').innerHTML = failedTests.map((test, i) => `
                        <div class="failed-test-item">
                            <div class="failed-test-num">${i + 1}</div>
                            <div class="failed-test-name">${test.name}</div>
                        </div>
                    `).join('');
                    document.getElementById('ownerDetailFailedPanel').classList.remove('hidden');
                } catch (e) {
                    console.error('Error fetching failed tests:', e);
                    document.getElementById('ownerDetailFailedPanel').classList.add('hidden');
                }
            } else {
                document.getElementById('ownerDetailFailedPanel').classList.add('hidden');
            }

            document.getElementById('ownerLoadingState').classList.add('hidden');
            document.getElementById('ownerSuiteDetailCard').classList.remove('hidden');
        }

        // Update tab setup to include Owner tab initialization
        const originalSetupTabs = setupTabs;
        setupTabs = function() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab + 'Tab').classList.add('active');

                    // Initialize tabs on first view
                    if (btn.dataset.tab === 'restapi' && !restApiInitialized) {
                        restApiInitialized = true;
                        setupRestApiReportsListeners();
                        initRestApiReports();
                    }
                    
                    if (btn.dataset.tab === 'owner' && !ownerTabInitialized) {
                        initOwnerTab();
                    }
                    
                    // Initialize UI Owner Suites on first view
                    if (btn.dataset.tab === 'uiowner' && !uiOwnerTabInitialized) {
                        initUiOwnerSuitesTab();
                    }
                });
            });
        };


    </script>
</body>
</html>